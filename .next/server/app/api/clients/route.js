/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/clients/route";
exports.ids = ["app/api/clients/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _root_isolir4_app_api_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/clients/route.ts */ \"(rsc)/./app/api/clients/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/clients/route\",\n        pathname: \"/api/clients\",\n        filename: \"route\",\n        bundlePath: \"app/api/clients/route\"\n    },\n    resolvedPagePath: \"/root/isolir4/app/api/clients/route.ts\",\n    nextConfigOutput,\n    userland: _root_isolir4_app_api_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/clients/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGllbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbGllbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2xpZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZyb290JTJGaXNvbGlyNCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGcm9vdCUyRmlzb2xpcjQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1Y7QUFDbkU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYW5lbC1ub2MvP2JkNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL3Jvb3QvaXNvbGlyNC9hcHAvYXBpL2NsaWVudHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NsaWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jbGllbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jbGllbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL3Jvb3QvaXNvbGlyNC9hcHAvYXBpL2NsaWVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NsaWVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/clients/route.ts":
/*!**********************************!*\
  !*** ./app/api/clients/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\nfunction normalizeClientRow(row) {\n    return {\n        id: row.id,\n        username: row.username,\n        ipAddress: row.ip_address,\n        type: row.type,\n        status: row.status,\n        profile: row.profile,\n        originalProfile: row.profile_asli,\n        comment: row.comment,\n        routerId: row.router_id,\n        routerName: row.router_name\n    };\n}\nfunction toApiResponse(payload, extras = {}) {\n    const { items, page, pageSize, totalItems, totalPages, search, routerId } = payload;\n    const pagination = {\n        page,\n        pageSize,\n        totalItems,\n        totalPages,\n        hasNext: totalPages > 0 && page < totalPages,\n        hasPrevious: totalPages > 0 && page > 1,\n        search,\n        routerId\n    };\n    return {\n        status: \"ok\",\n        items: items.map(normalizeClientRow),\n        pagination,\n        ...extras\n    };\n}\nfunction parseNumeric(value) {\n    if (typeof value === \"number\" && Number.isFinite(value)) {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        const parsed = Number(value);\n        if (Number.isFinite(parsed)) {\n            return parsed;\n        }\n    }\n    return undefined;\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const page = parseNumeric(searchParams.get(\"page\"));\n        const pageSize = parseNumeric(searchParams.get(\"pageSize\"));\n        const searchParam = searchParams.get(\"search\");\n        const routerIdParam = parseNumeric(searchParams.get(\"routerId\"));\n        const routerId = routerIdParam !== undefined && routerIdParam > 0 ? routerIdParam : undefined;\n        const [result, routers] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchClients)({\n                page,\n                pageSize,\n                search: searchParam ?? undefined,\n                routerId\n            }),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchRouters)()\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(toApiResponse(result, {\n            routers\n        }), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"[api/clients] failed to fetch data\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: \"Gagal mengambil data client.\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PATCH(request) {\n    try {\n        const body = await request.json();\n        const id = typeof body.id === \"number\" ? body.id : Number(body.id);\n        const status = typeof body.status === \"string\" ? body.status.trim().toLowerCase() : \"\";\n        const page = parseNumeric(body.page);\n        const pageSize = parseNumeric(body.pageSize);\n        const search = typeof body.search === \"string\" ? body.search : undefined;\n        const routerIdBody = parseNumeric(body.routerId);\n        const routerId = routerIdBody !== undefined && routerIdBody > 0 ? routerIdBody : undefined;\n        if (!Number.isFinite(id) || id <= 0) {\n            throw new Error(\"ID client tidak valid.\");\n        }\n        if (status !== \"aktif\" && status !== \"nonaktif\") {\n            throw new Error(\"Status tidak valid.\");\n        }\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.updateClientStatus)(id, status);\n        const [result, routers] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchClients)({\n                page,\n                pageSize,\n                search,\n                routerId\n            }),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchRouters)()\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...toApiResponse(result, {\n                routers\n            }),\n            message: \"Status client berhasil diperbarui.\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"[api/clients] failed to update\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Gagal memperbarui status client.\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const username = typeof body.username === \"string\" ? body.username.trim() : \"\";\n        if (!username) {\n            throw new Error(\"Username wajib diisi.\");\n        }\n        const ipAddressRaw = typeof body.ipAddress === \"string\" ? body.ipAddress.trim() : null;\n        const typeRaw = typeof body.type === \"string\" ? body.type.trim() : null;\n        const statusRaw = typeof body.status === \"string\" ? body.status.trim().toLowerCase() : \"aktif\";\n        const profileRaw = typeof body.profile === \"string\" ? body.profile.trim() : null;\n        const commentRaw = typeof body.comment === \"string\" ? body.comment.trim() : null;\n        const clientRouterIdParam = parseNumeric(body.routerId);\n        const clientRouterId = clientRouterIdParam !== undefined && clientRouterIdParam > 0 ? clientRouterIdParam : null;\n        const filterRouterIdParam = parseNumeric(body.filterRouterId ?? body.activeRouterId);\n        const filterRouterId = filterRouterIdParam !== undefined && filterRouterIdParam > 0 ? filterRouterIdParam : undefined;\n        const page = parseNumeric(body.page);\n        const pageSize = parseNumeric(body.pageSize);\n        const search = typeof body.search === \"string\" ? body.search : undefined;\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.createClient)({\n            username,\n            ipAddress: ipAddressRaw,\n            type: typeRaw,\n            status: statusRaw === \"nonaktif\" ? \"nonaktif\" : \"aktif\",\n            profile: profileRaw,\n            comment: commentRaw,\n            routerId: clientRouterId\n        });\n        const [result, routers] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchClients)({\n                page,\n                pageSize,\n                search,\n                routerId: filterRouterId\n            }),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchRouters)()\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...toApiResponse(result, {\n                routers\n            }),\n            message: \"Client berhasil ditambahkan.\"\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"[api/clients] failed to create\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Gagal menambahkan client baru.\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function PUT(request) {\n    try {\n        const body = await request.json();\n        const id = typeof body.id === \"number\" ? body.id : Number(body.id);\n        if (!Number.isFinite(id) || id <= 0) {\n            throw new Error(\"ID client tidak valid.\");\n        }\n        const username = typeof body.username === \"string\" ? body.username.trim() : undefined;\n        const ipAddressValue = body.ipAddress;\n        const ipAddress = ipAddressValue === null ? null : typeof ipAddressValue === \"string\" ? ipAddressValue.trim() : undefined;\n        const type = typeof body.type === \"string\" ? body.type.trim() : undefined;\n        const statusRaw = typeof body.status === \"string\" ? body.status.trim().toLowerCase() : undefined;\n        const status = statusRaw === undefined ? undefined : statusRaw === \"nonaktif\" ? \"nonaktif\" : statusRaw === \"aktif\" ? \"aktif\" : undefined;\n        const profileValue = body.profile;\n        const profile = profileValue === null ? null : typeof profileValue === \"string\" ? profileValue.trim() : undefined;\n        const commentValue = body.comment;\n        const comment = commentValue === null ? null : typeof commentValue === \"string\" ? commentValue.trim() : undefined;\n        const routerIdParam = parseNumeric(body.routerId);\n        const routerId = routerIdParam === undefined ? undefined : routerIdParam > 0 ? routerIdParam : routerIdParam === 0 ? null : undefined;\n        const page = parseNumeric(body.page);\n        const pageSize = parseNumeric(body.pageSize);\n        const search = typeof body.search === \"string\" ? body.search : undefined;\n        const filterRouterIdParam = parseNumeric(body.filterRouterId ?? body.activeRouterId);\n        const filterRouterId = filterRouterIdParam !== undefined && filterRouterIdParam > 0 ? filterRouterIdParam : undefined;\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.updateClient)(id, {\n            username,\n            ipAddress,\n            type,\n            status,\n            profile,\n            comment,\n            routerId\n        });\n        const [result, routers] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchClients)({\n                page,\n                pageSize,\n                search,\n                routerId: filterRouterId\n            }),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchRouters)()\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...toApiResponse(result, {\n                routers\n            }),\n            message: \"Client berhasil diperbarui.\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"[api/clients] failed to edit\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Gagal memperbarui client.\"\n        }, {\n            status: 400\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const idParam = searchParams.get(\"id\");\n        const id = idParam ? Number(idParam) : NaN;\n        if (!Number.isFinite(id) || id <= 0) {\n            throw new Error(\"ID client tidak valid.\");\n        }\n        const page = parseNumeric(searchParams.get(\"page\"));\n        const pageSize = parseNumeric(searchParams.get(\"pageSize\"));\n        const search = searchParams.get(\"search\") ?? undefined;\n        const routerFilterParam = parseNumeric(searchParams.get(\"routerId\"));\n        const routerId = routerFilterParam !== undefined && routerFilterParam > 0 ? routerFilterParam : undefined;\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.deleteClient)(id);\n        const [result, routers] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchClients)({\n                page,\n                pageSize,\n                search,\n                routerId\n            }),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.fetchRouters)()\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...toApiResponse(result, {\n                routers\n            }),\n            message: \"Client berhasil dihapus.\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"[api/clients] failed to delete\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Gagal menghapus client.\"\n        }, {\n            status: 400\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NsaWVudHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwQztBQUd5RTtBQWdDbkgsU0FBU08sbUJBQW1CQyxHQUFjO0lBQ3hDLE9BQU87UUFDTEMsSUFBSUQsSUFBSUMsRUFBRTtRQUNWQyxVQUFVRixJQUFJRSxRQUFRO1FBQ3RCQyxXQUFXSCxJQUFJSSxVQUFVO1FBQ3pCQyxNQUFNTCxJQUFJSyxJQUFJO1FBQ2RDLFFBQVFOLElBQUlNLE1BQU07UUFDbEJDLFNBQVNQLElBQUlPLE9BQU87UUFDcEJDLGlCQUFpQlIsSUFBSVMsWUFBWTtRQUNqQ0MsU0FBU1YsSUFBSVUsT0FBTztRQUNwQkMsVUFBVVgsSUFBSVksU0FBUztRQUN2QkMsWUFBWWIsSUFBSWMsV0FBVztJQUM3QjtBQUNGO0FBRUEsU0FBU0MsY0FBY0MsT0FBNEIsRUFBRUMsU0FBNEIsQ0FBQyxDQUFDO0lBQ2pGLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsVUFBVSxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sRUFBRVosUUFBUSxFQUFFLEdBQUdLO0lBQzVFLE1BQU1RLGFBQTZCO1FBQ2pDTDtRQUNBQztRQUNBQztRQUNBQztRQUNBRyxTQUFTSCxhQUFhLEtBQUtILE9BQU9HO1FBQ2xDSSxhQUFhSixhQUFhLEtBQUtILE9BQU87UUFDdENJO1FBQ0FaO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xMLFFBQVE7UUFDUlksT0FBT0EsTUFBTVMsR0FBRyxDQUFDNUI7UUFDakJ5QjtRQUNBLEdBQUdQLE1BQU07SUFDWDtBQUNGO0FBRUEsU0FBU1csYUFBYUMsS0FBYztJQUNsQyxJQUFJLE9BQU9BLFVBQVUsWUFBWUMsT0FBT0MsUUFBUSxDQUFDRixRQUFRO1FBQ3ZELE9BQU9BO0lBQ1Q7SUFDQSxJQUFJLE9BQU9BLFVBQVUsVUFBVTtRQUM3QixNQUFNRyxTQUFTRixPQUFPRDtRQUN0QixJQUFJQyxPQUFPQyxRQUFRLENBQUNDLFNBQVM7WUFDM0IsT0FBT0E7UUFDVDtJQUNGO0lBQ0EsT0FBT0M7QUFDVDtBQUVPLGVBQWVDLElBQUlDLE9BQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTW5CLE9BQU9TLGFBQWFRLGFBQWFHLEdBQUcsQ0FBQztRQUMzQyxNQUFNbkIsV0FBV1EsYUFBYVEsYUFBYUcsR0FBRyxDQUFDO1FBQy9DLE1BQU1DLGNBQWNKLGFBQWFHLEdBQUcsQ0FBQztRQUNyQyxNQUFNRSxnQkFBZ0JiLGFBQWFRLGFBQWFHLEdBQUcsQ0FBQztRQUNwRCxNQUFNNUIsV0FBVzhCLGtCQUFrQlIsYUFBYVEsZ0JBQWdCLElBQUlBLGdCQUFnQlI7UUFFcEYsTUFBTSxDQUFDUyxRQUFRQyxRQUFRLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1lBQzFDbEQscURBQVlBLENBQUM7Z0JBQ1h3QjtnQkFDQUM7Z0JBQ0FHLFFBQVFpQixlQUFlUDtnQkFDdkJ0QjtZQUNGO1lBQ0FmLHFEQUFZQTtTQUNiO1FBQ0QsT0FBT0oscURBQVlBLENBQUNzRCxJQUFJLENBQUMvQixjQUFjMkIsUUFBUTtZQUFFQztRQUFRLElBQUk7WUFBRXJDLFFBQVE7UUFBSTtJQUM3RSxFQUFFLE9BQU95QyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE9BQU92RCxxREFBWUEsQ0FBQ3NELElBQUksQ0FDdEI7WUFDRXhDLFFBQVE7WUFDUjJDLFNBQVM7UUFDWCxHQUNBO1lBQUUzQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWU0QyxNQUFNZixPQUFnQjtJQUMxQyxJQUFJO1FBQ0YsTUFBTWdCLE9BQVEsTUFBTWhCLFFBQVFXLElBQUk7UUFDaEMsTUFBTTdDLEtBQUssT0FBT2tELEtBQUtsRCxFQUFFLEtBQUssV0FBV2tELEtBQUtsRCxFQUFFLEdBQUc2QixPQUFPcUIsS0FBS2xELEVBQUU7UUFDakUsTUFBTUssU0FBUyxPQUFPNkMsS0FBSzdDLE1BQU0sS0FBSyxXQUFXNkMsS0FBSzdDLE1BQU0sQ0FBQzhDLElBQUksR0FBR0MsV0FBVyxLQUFLO1FBQ3BGLE1BQU1sQyxPQUFPUyxhQUFhdUIsS0FBS2hDLElBQUk7UUFDbkMsTUFBTUMsV0FBV1EsYUFBYXVCLEtBQUsvQixRQUFRO1FBQzNDLE1BQU1HLFNBQVMsT0FBTzRCLEtBQUs1QixNQUFNLEtBQUssV0FBVzRCLEtBQUs1QixNQUFNLEdBQUdVO1FBQy9ELE1BQU1xQixlQUFlMUIsYUFBYXVCLEtBQUt4QyxRQUFRO1FBQy9DLE1BQU1BLFdBQVcyQyxpQkFBaUJyQixhQUFhcUIsZUFBZSxJQUFJQSxlQUFlckI7UUFFakYsSUFBSSxDQUFDSCxPQUFPQyxRQUFRLENBQUM5QixPQUFPQSxNQUFNLEdBQUc7WUFDbkMsTUFBTSxJQUFJc0QsTUFBTTtRQUNsQjtRQUNBLElBQUlqRCxXQUFXLFdBQVdBLFdBQVcsWUFBWTtZQUMvQyxNQUFNLElBQUlpRCxNQUFNO1FBQ2xCO1FBRUEsTUFBTXpELDJEQUFrQkEsQ0FBQ0csSUFBSUs7UUFDN0IsTUFBTSxDQUFDb0MsUUFBUUMsUUFBUSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUFDbEQscURBQVlBLENBQUM7Z0JBQUV3QjtnQkFBTUM7Z0JBQVVHO2dCQUFRWjtZQUFTO1lBQUlmLHFEQUFZQTtTQUFHO1FBQ2hILE9BQU9KLHFEQUFZQSxDQUFDc0QsSUFBSSxDQUN0QjtZQUNFLEdBQUcvQixjQUFjMkIsUUFBUTtnQkFBRUM7WUFBUSxFQUFFO1lBQ3JDTSxTQUFTO1FBQ1gsR0FDQTtZQUFFM0MsUUFBUTtRQUFJO0lBRWxCLEVBQUUsT0FBT3lDLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT3ZELHFEQUFZQSxDQUFDc0QsSUFBSSxDQUN0QjtZQUNFeEMsUUFBUTtZQUNSMkMsU0FBU0YsaUJBQWlCUSxRQUFRUixNQUFNRSxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFM0MsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFTyxlQUFla0QsS0FBS3JCLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNZ0IsT0FBUSxNQUFNaEIsUUFBUVcsSUFBSTtRQUNoQyxNQUFNNUMsV0FBVyxPQUFPaUQsS0FBS2pELFFBQVEsS0FBSyxXQUFXaUQsS0FBS2pELFFBQVEsQ0FBQ2tELElBQUksS0FBSztRQUM1RSxJQUFJLENBQUNsRCxVQUFVO1lBQ2IsTUFBTSxJQUFJcUQsTUFBTTtRQUNsQjtRQUVBLE1BQU1FLGVBQWUsT0FBT04sS0FBS2hELFNBQVMsS0FBSyxXQUFXZ0QsS0FBS2hELFNBQVMsQ0FBQ2lELElBQUksS0FBSztRQUNsRixNQUFNTSxVQUFVLE9BQU9QLEtBQUs5QyxJQUFJLEtBQUssV0FBVzhDLEtBQUs5QyxJQUFJLENBQUMrQyxJQUFJLEtBQUs7UUFDbkUsTUFBTU8sWUFBWSxPQUFPUixLQUFLN0MsTUFBTSxLQUFLLFdBQVc2QyxLQUFLN0MsTUFBTSxDQUFDOEMsSUFBSSxHQUFHQyxXQUFXLEtBQUs7UUFDdkYsTUFBTU8sYUFBYSxPQUFPVCxLQUFLNUMsT0FBTyxLQUFLLFdBQVc0QyxLQUFLNUMsT0FBTyxDQUFDNkMsSUFBSSxLQUFLO1FBQzVFLE1BQU1TLGFBQWEsT0FBT1YsS0FBS3pDLE9BQU8sS0FBSyxXQUFXeUMsS0FBS3pDLE9BQU8sQ0FBQzBDLElBQUksS0FBSztRQUM1RSxNQUFNVSxzQkFBc0JsQyxhQUFhdUIsS0FBS3hDLFFBQVE7UUFDdEQsTUFBTW9ELGlCQUNKRCx3QkFBd0I3QixhQUFhNkIsc0JBQXNCLElBQUlBLHNCQUFzQjtRQUV2RixNQUFNRSxzQkFBc0JwQyxhQUFhdUIsS0FBS2MsY0FBYyxJQUFJZCxLQUFLZSxjQUFjO1FBQ25GLE1BQU1ELGlCQUNKRCx3QkFBd0IvQixhQUFhK0Isc0JBQXNCLElBQUlBLHNCQUFzQi9CO1FBRXZGLE1BQU1kLE9BQU9TLGFBQWF1QixLQUFLaEMsSUFBSTtRQUNuQyxNQUFNQyxXQUFXUSxhQUFhdUIsS0FBSy9CLFFBQVE7UUFDM0MsTUFBTUcsU0FBUyxPQUFPNEIsS0FBSzVCLE1BQU0sS0FBSyxXQUFXNEIsS0FBSzVCLE1BQU0sR0FBR1U7UUFFL0QsTUFBTXhDLHFEQUFZQSxDQUFDO1lBQ2pCUztZQUNBQyxXQUFXc0Q7WUFDWHBELE1BQU1xRDtZQUNOcEQsUUFBUXFELGNBQWMsYUFBYSxhQUFhO1lBQ2hEcEQsU0FBU3FEO1lBQ1RsRCxTQUFTbUQ7WUFDVGxELFVBQVVvRDtRQUNaO1FBRUEsTUFBTSxDQUFDckIsUUFBUUMsUUFBUSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUMxQ2xELHFEQUFZQSxDQUFDO2dCQUNYd0I7Z0JBQ0FDO2dCQUNBRztnQkFDQVosVUFBVXNEO1lBQ1o7WUFDQXJFLHFEQUFZQTtTQUNiO1FBRUQsT0FBT0oscURBQVlBLENBQUNzRCxJQUFJLENBQ3RCO1lBQ0UsR0FBRy9CLGNBQWMyQixRQUFRO2dCQUFFQztZQUFRLEVBQUU7WUFDckNNLFNBQVM7UUFDWCxHQUNBO1lBQUUzQyxRQUFRO1FBQUk7SUFFbEIsRUFBRSxPQUFPeUMsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPdkQscURBQVlBLENBQUNzRCxJQUFJLENBQ3RCO1lBQ0V4QyxRQUFRO1lBQ1IyQyxTQUFTRixpQkFBaUJRLFFBQVFSLE1BQU1FLE9BQU8sR0FBRztRQUNwRCxHQUNBO1lBQUUzQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWU2RCxJQUFJaEMsT0FBZ0I7SUFDeEMsSUFBSTtRQUNGLE1BQU1nQixPQUFRLE1BQU1oQixRQUFRVyxJQUFJO1FBQ2hDLE1BQU03QyxLQUFLLE9BQU9rRCxLQUFLbEQsRUFBRSxLQUFLLFdBQVdrRCxLQUFLbEQsRUFBRSxHQUFHNkIsT0FBT3FCLEtBQUtsRCxFQUFFO1FBQ2pFLElBQUksQ0FBQzZCLE9BQU9DLFFBQVEsQ0FBQzlCLE9BQU9BLE1BQU0sR0FBRztZQUNuQyxNQUFNLElBQUlzRCxNQUFNO1FBQ2xCO1FBRUEsTUFBTXJELFdBQVcsT0FBT2lELEtBQUtqRCxRQUFRLEtBQUssV0FBV2lELEtBQUtqRCxRQUFRLENBQUNrRCxJQUFJLEtBQUtuQjtRQUM1RSxNQUFNbUMsaUJBQWlCakIsS0FBS2hELFNBQVM7UUFDckMsTUFBTUEsWUFDSmlFLG1CQUFtQixPQUFPLE9BQU8sT0FBT0EsbUJBQW1CLFdBQVdBLGVBQWVoQixJQUFJLEtBQUtuQjtRQUNoRyxNQUFNNUIsT0FBTyxPQUFPOEMsS0FBSzlDLElBQUksS0FBSyxXQUFXOEMsS0FBSzlDLElBQUksQ0FBQytDLElBQUksS0FBS25CO1FBQ2hFLE1BQU0wQixZQUFZLE9BQU9SLEtBQUs3QyxNQUFNLEtBQUssV0FBVzZDLEtBQUs3QyxNQUFNLENBQUM4QyxJQUFJLEdBQUdDLFdBQVcsS0FBS3BCO1FBQ3ZGLE1BQU0zQixTQUNKcUQsY0FBYzFCLFlBQVlBLFlBQVkwQixjQUFjLGFBQWEsYUFBYUEsY0FBYyxVQUFVLFVBQVUxQjtRQUNsSCxNQUFNb0MsZUFBZWxCLEtBQUs1QyxPQUFPO1FBQ2pDLE1BQU1BLFVBQ0o4RCxpQkFBaUIsT0FBTyxPQUFPLE9BQU9BLGlCQUFpQixXQUFXQSxhQUFhakIsSUFBSSxLQUFLbkI7UUFDMUYsTUFBTXFDLGVBQWVuQixLQUFLekMsT0FBTztRQUNqQyxNQUFNQSxVQUNKNEQsaUJBQWlCLE9BQU8sT0FBTyxPQUFPQSxpQkFBaUIsV0FBV0EsYUFBYWxCLElBQUksS0FBS25CO1FBQzFGLE1BQU1RLGdCQUFnQmIsYUFBYXVCLEtBQUt4QyxRQUFRO1FBQ2hELE1BQU1BLFdBQ0o4QixrQkFBa0JSLFlBQVlBLFlBQVlRLGdCQUFnQixJQUFJQSxnQkFBZ0JBLGtCQUFrQixJQUFJLE9BQU9SO1FBRTdHLE1BQU1kLE9BQU9TLGFBQWF1QixLQUFLaEMsSUFBSTtRQUNuQyxNQUFNQyxXQUFXUSxhQUFhdUIsS0FBSy9CLFFBQVE7UUFDM0MsTUFBTUcsU0FBUyxPQUFPNEIsS0FBSzVCLE1BQU0sS0FBSyxXQUFXNEIsS0FBSzVCLE1BQU0sR0FBR1U7UUFDL0QsTUFBTStCLHNCQUFzQnBDLGFBQWF1QixLQUFLYyxjQUFjLElBQUlkLEtBQUtlLGNBQWM7UUFDbkYsTUFBTUQsaUJBQ0pELHdCQUF3Qi9CLGFBQWErQixzQkFBc0IsSUFBSUEsc0JBQXNCL0I7UUFFdkYsTUFBTXBDLHFEQUFZQSxDQUFDSSxJQUFJO1lBQ3JCQztZQUNBQztZQUNBRTtZQUNBQztZQUNBQztZQUNBRztZQUNBQztRQUNGO1FBRUEsTUFBTSxDQUFDK0IsUUFBUUMsUUFBUSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUMxQ2xELHFEQUFZQSxDQUFDO2dCQUNYd0I7Z0JBQ0FDO2dCQUNBRztnQkFDQVosVUFBVXNEO1lBQ1o7WUFDQXJFLHFEQUFZQTtTQUNiO1FBRUQsT0FBT0oscURBQVlBLENBQUNzRCxJQUFJLENBQ3RCO1lBQ0UsR0FBRy9CLGNBQWMyQixRQUFRO2dCQUFFQztZQUFRLEVBQUU7WUFDckNNLFNBQVM7UUFDWCxHQUNBO1lBQUUzQyxRQUFRO1FBQUk7SUFFbEIsRUFBRSxPQUFPeUMsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPdkQscURBQVlBLENBQUNzRCxJQUFJLENBQ3RCO1lBQ0V4QyxRQUFRO1lBQ1IyQyxTQUFTRixpQkFBaUJRLFFBQVFSLE1BQU1FLE9BQU8sR0FBRztRQUNwRCxHQUNBO1lBQUUzQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWVpRSxPQUFPcEMsT0FBZ0I7SUFDM0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztRQUM1QyxNQUFNa0MsVUFBVXBDLGFBQWFHLEdBQUcsQ0FBQztRQUNqQyxNQUFNdEMsS0FBS3VFLFVBQVUxQyxPQUFPMEMsV0FBV0M7UUFDdkMsSUFBSSxDQUFDM0MsT0FBT0MsUUFBUSxDQUFDOUIsT0FBT0EsTUFBTSxHQUFHO1lBQ25DLE1BQU0sSUFBSXNELE1BQU07UUFDbEI7UUFFQSxNQUFNcEMsT0FBT1MsYUFBYVEsYUFBYUcsR0FBRyxDQUFDO1FBQzNDLE1BQU1uQixXQUFXUSxhQUFhUSxhQUFhRyxHQUFHLENBQUM7UUFDL0MsTUFBTWhCLFNBQVNhLGFBQWFHLEdBQUcsQ0FBQyxhQUFhTjtRQUM3QyxNQUFNeUMsb0JBQW9COUMsYUFBYVEsYUFBYUcsR0FBRyxDQUFDO1FBQ3hELE1BQU01QixXQUNKK0Qsc0JBQXNCekMsYUFBYXlDLG9CQUFvQixJQUFJQSxvQkFBb0J6QztRQUVqRixNQUFNdkMscURBQVlBLENBQUNPO1FBRW5CLE1BQU0sQ0FBQ3lDLFFBQVFDLFFBQVEsR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7WUFDMUNsRCxxREFBWUEsQ0FBQztnQkFDWHdCO2dCQUNBQztnQkFDQUc7Z0JBQ0FaO1lBQ0Y7WUFDQWYscURBQVlBO1NBQ2I7UUFFRCxPQUFPSixxREFBWUEsQ0FBQ3NELElBQUksQ0FDdEI7WUFDRSxHQUFHL0IsY0FBYzJCLFFBQVE7Z0JBQUVDO1lBQVEsRUFBRTtZQUNyQ00sU0FBUztRQUNYLEdBQ0E7WUFBRTNDLFFBQVE7UUFBSTtJQUVsQixFQUFFLE9BQU95QyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hELE9BQU92RCxxREFBWUEsQ0FBQ3NELElBQUksQ0FDdEI7WUFDRXhDLFFBQVE7WUFDUjJDLFNBQVNGLGlCQUFpQlEsUUFBUVIsTUFBTUUsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRTNDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFuZWwtbm9jLy4vYXBwL2FwaS9jbGllbnRzL3JvdXRlLnRzPzYwZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcblxuaW1wb3J0IHR5cGUgeyBDbGllbnRSb3csIFJvdXRlclJvdyB9IGZyb20gXCJAL2xpYi9kYlwiXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQsIGRlbGV0ZUNsaWVudCwgZmV0Y2hDbGllbnRzLCBmZXRjaFJvdXRlcnMsIHVwZGF0ZUNsaWVudCwgdXBkYXRlQ2xpZW50U3RhdHVzIH0gZnJvbSBcIkAvbGliL2RiXCJcblxudHlwZSBDbGllbnRJdGVtID0ge1xuICBpZDogbnVtYmVyXG4gIHVzZXJuYW1lOiBzdHJpbmdcbiAgaXBBZGRyZXNzOiBzdHJpbmcgfCBudWxsXG4gIHR5cGU6IHN0cmluZyB8IG51bGxcbiAgc3RhdHVzOiBzdHJpbmcgfCBudWxsXG4gIHByb2ZpbGU6IHN0cmluZyB8IG51bGxcbiAgb3JpZ2luYWxQcm9maWxlOiBzdHJpbmcgfCBudWxsXG4gIGNvbW1lbnQ6IHN0cmluZyB8IG51bGxcbiAgcm91dGVySWQ6IG51bWJlciB8IG51bGxcbiAgcm91dGVyTmFtZTogc3RyaW5nIHwgbnVsbFxufVxuXG50eXBlIFBhZ2luYXRpb25NZXRhID0ge1xuICBwYWdlOiBudW1iZXJcbiAgcGFnZVNpemU6IG51bWJlclxuICB0b3RhbEl0ZW1zOiBudW1iZXJcbiAgdG90YWxQYWdlczogbnVtYmVyXG4gIGhhc05leHQ6IGJvb2xlYW5cbiAgaGFzUHJldmlvdXM6IGJvb2xlYW5cbiAgc2VhcmNoOiBzdHJpbmdcbiAgcm91dGVySWQ6IG51bWJlciB8IG51bGxcbn1cblxudHlwZSBGZXRjaENsaWVudHNQYXlsb2FkID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBmZXRjaENsaWVudHM+PlxuXG50eXBlIEFwaVJlc3BvbnNlRXh0cmFzID0ge1xuICByb3V0ZXJzPzogUm91dGVyUm93W11cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQ2xpZW50Um93KHJvdzogQ2xpZW50Um93KTogQ2xpZW50SXRlbSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IHJvdy5pZCxcbiAgICB1c2VybmFtZTogcm93LnVzZXJuYW1lLFxuICAgIGlwQWRkcmVzczogcm93LmlwX2FkZHJlc3MsXG4gICAgdHlwZTogcm93LnR5cGUsXG4gICAgc3RhdHVzOiByb3cuc3RhdHVzLFxuICAgIHByb2ZpbGU6IHJvdy5wcm9maWxlLFxuICAgIG9yaWdpbmFsUHJvZmlsZTogcm93LnByb2ZpbGVfYXNsaSxcbiAgICBjb21tZW50OiByb3cuY29tbWVudCxcbiAgICByb3V0ZXJJZDogcm93LnJvdXRlcl9pZCxcbiAgICByb3V0ZXJOYW1lOiByb3cucm91dGVyX25hbWUsXG4gIH1cbn1cblxuZnVuY3Rpb24gdG9BcGlSZXNwb25zZShwYXlsb2FkOiBGZXRjaENsaWVudHNQYXlsb2FkLCBleHRyYXM6IEFwaVJlc3BvbnNlRXh0cmFzID0ge30pIHtcbiAgY29uc3QgeyBpdGVtcywgcGFnZSwgcGFnZVNpemUsIHRvdGFsSXRlbXMsIHRvdGFsUGFnZXMsIHNlYXJjaCwgcm91dGVySWQgfSA9IHBheWxvYWRcbiAgY29uc3QgcGFnaW5hdGlvbjogUGFnaW5hdGlvbk1ldGEgPSB7XG4gICAgcGFnZSxcbiAgICBwYWdlU2l6ZSxcbiAgICB0b3RhbEl0ZW1zLFxuICAgIHRvdGFsUGFnZXMsXG4gICAgaGFzTmV4dDogdG90YWxQYWdlcyA+IDAgJiYgcGFnZSA8IHRvdGFsUGFnZXMsXG4gICAgaGFzUHJldmlvdXM6IHRvdGFsUGFnZXMgPiAwICYmIHBhZ2UgPiAxLFxuICAgIHNlYXJjaCxcbiAgICByb3V0ZXJJZCxcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiBcIm9rXCIsXG4gICAgaXRlbXM6IGl0ZW1zLm1hcChub3JtYWxpemVDbGllbnRSb3cpLFxuICAgIHBhZ2luYXRpb24sXG4gICAgLi4uZXh0cmFzLFxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlTnVtZXJpYyh2YWx1ZTogdW5rbm93bik6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBOdW1iZXIodmFsdWUpXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShwYXJzZWQpKSB7XG4gICAgICByZXR1cm4gcGFyc2VkXG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgcGFnZSA9IHBhcnNlTnVtZXJpYyhzZWFyY2hQYXJhbXMuZ2V0KFwicGFnZVwiKSlcbiAgICBjb25zdCBwYWdlU2l6ZSA9IHBhcnNlTnVtZXJpYyhzZWFyY2hQYXJhbXMuZ2V0KFwicGFnZVNpemVcIikpXG4gICAgY29uc3Qgc2VhcmNoUGFyYW0gPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2VhcmNoXCIpXG4gICAgY29uc3Qgcm91dGVySWRQYXJhbSA9IHBhcnNlTnVtZXJpYyhzZWFyY2hQYXJhbXMuZ2V0KFwicm91dGVySWRcIikpXG4gICAgY29uc3Qgcm91dGVySWQgPSByb3V0ZXJJZFBhcmFtICE9PSB1bmRlZmluZWQgJiYgcm91dGVySWRQYXJhbSA+IDAgPyByb3V0ZXJJZFBhcmFtIDogdW5kZWZpbmVkXG5cbiAgICBjb25zdCBbcmVzdWx0LCByb3V0ZXJzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGZldGNoQ2xpZW50cyh7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBzZWFyY2g6IHNlYXJjaFBhcmFtID8/IHVuZGVmaW5lZCxcbiAgICAgICAgcm91dGVySWQsXG4gICAgICB9KSxcbiAgICAgIGZldGNoUm91dGVycygpLFxuICAgIF0pXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHRvQXBpUmVzcG9uc2UocmVzdWx0LCB7IHJvdXRlcnMgfSksIHsgc3RhdHVzOiAyMDAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW2FwaS9jbGllbnRzXSBmYWlsZWQgdG8gZmV0Y2ggZGF0YVwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkdhZ2FsIG1lbmdhbWJpbCBkYXRhIGNsaWVudC5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCByZXF1ZXN0Lmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICBjb25zdCBpZCA9IHR5cGVvZiBib2R5LmlkID09PSBcIm51bWJlclwiID8gYm9keS5pZCA6IE51bWJlcihib2R5LmlkKVxuICAgIGNvbnN0IHN0YXR1cyA9IHR5cGVvZiBib2R5LnN0YXR1cyA9PT0gXCJzdHJpbmdcIiA/IGJvZHkuc3RhdHVzLnRyaW0oKS50b0xvd2VyQ2FzZSgpIDogXCJcIlxuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZU51bWVyaWMoYm9keS5wYWdlKVxuICAgIGNvbnN0IHBhZ2VTaXplID0gcGFyc2VOdW1lcmljKGJvZHkucGFnZVNpemUpXG4gICAgY29uc3Qgc2VhcmNoID0gdHlwZW9mIGJvZHkuc2VhcmNoID09PSBcInN0cmluZ1wiID8gYm9keS5zZWFyY2ggOiB1bmRlZmluZWRcbiAgICBjb25zdCByb3V0ZXJJZEJvZHkgPSBwYXJzZU51bWVyaWMoYm9keS5yb3V0ZXJJZClcbiAgICBjb25zdCByb3V0ZXJJZCA9IHJvdXRlcklkQm9keSAhPT0gdW5kZWZpbmVkICYmIHJvdXRlcklkQm9keSA+IDAgPyByb3V0ZXJJZEJvZHkgOiB1bmRlZmluZWRcblxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlkKSB8fCBpZCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJRCBjbGllbnQgdGlkYWsgdmFsaWQuXCIpXG4gICAgfVxuICAgIGlmIChzdGF0dXMgIT09IFwiYWt0aWZcIiAmJiBzdGF0dXMgIT09IFwibm9uYWt0aWZcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdHVzIHRpZGFrIHZhbGlkLlwiKVxuICAgIH1cblxuICAgIGF3YWl0IHVwZGF0ZUNsaWVudFN0YXR1cyhpZCwgc3RhdHVzKVxuICAgIGNvbnN0IFtyZXN1bHQsIHJvdXRlcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2ZldGNoQ2xpZW50cyh7IHBhZ2UsIHBhZ2VTaXplLCBzZWFyY2gsIHJvdXRlcklkIH0pLCBmZXRjaFJvdXRlcnMoKV0pXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICAuLi50b0FwaVJlc3BvbnNlKHJlc3VsdCwgeyByb3V0ZXJzIH0pLFxuICAgICAgICBtZXNzYWdlOiBcIlN0YXR1cyBjbGllbnQgYmVyaGFzaWwgZGlwZXJiYXJ1aS5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAwIH0sXG4gICAgKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbYXBpL2NsaWVudHNdIGZhaWxlZCB0byB1cGRhdGVcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkdhZ2FsIG1lbXBlcmJhcnVpIHN0YXR1cyBjbGllbnQuXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9LFxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCByZXF1ZXN0Lmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICBjb25zdCB1c2VybmFtZSA9IHR5cGVvZiBib2R5LnVzZXJuYW1lID09PSBcInN0cmluZ1wiID8gYm9keS51c2VybmFtZS50cmltKCkgOiBcIlwiXG4gICAgaWYgKCF1c2VybmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlcm5hbWUgd2FqaWIgZGlpc2kuXCIpXG4gICAgfVxuXG4gICAgY29uc3QgaXBBZGRyZXNzUmF3ID0gdHlwZW9mIGJvZHkuaXBBZGRyZXNzID09PSBcInN0cmluZ1wiID8gYm9keS5pcEFkZHJlc3MudHJpbSgpIDogbnVsbFxuICAgIGNvbnN0IHR5cGVSYXcgPSB0eXBlb2YgYm9keS50eXBlID09PSBcInN0cmluZ1wiID8gYm9keS50eXBlLnRyaW0oKSA6IG51bGxcbiAgICBjb25zdCBzdGF0dXNSYXcgPSB0eXBlb2YgYm9keS5zdGF0dXMgPT09IFwic3RyaW5nXCIgPyBib2R5LnN0YXR1cy50cmltKCkudG9Mb3dlckNhc2UoKSA6IFwiYWt0aWZcIlxuICAgIGNvbnN0IHByb2ZpbGVSYXcgPSB0eXBlb2YgYm9keS5wcm9maWxlID09PSBcInN0cmluZ1wiID8gYm9keS5wcm9maWxlLnRyaW0oKSA6IG51bGxcbiAgICBjb25zdCBjb21tZW50UmF3ID0gdHlwZW9mIGJvZHkuY29tbWVudCA9PT0gXCJzdHJpbmdcIiA/IGJvZHkuY29tbWVudC50cmltKCkgOiBudWxsXG4gICAgY29uc3QgY2xpZW50Um91dGVySWRQYXJhbSA9IHBhcnNlTnVtZXJpYyhib2R5LnJvdXRlcklkKVxuICAgIGNvbnN0IGNsaWVudFJvdXRlcklkID1cbiAgICAgIGNsaWVudFJvdXRlcklkUGFyYW0gIT09IHVuZGVmaW5lZCAmJiBjbGllbnRSb3V0ZXJJZFBhcmFtID4gMCA/IGNsaWVudFJvdXRlcklkUGFyYW0gOiBudWxsXG5cbiAgICBjb25zdCBmaWx0ZXJSb3V0ZXJJZFBhcmFtID0gcGFyc2VOdW1lcmljKGJvZHkuZmlsdGVyUm91dGVySWQgPz8gYm9keS5hY3RpdmVSb3V0ZXJJZClcbiAgICBjb25zdCBmaWx0ZXJSb3V0ZXJJZCA9XG4gICAgICBmaWx0ZXJSb3V0ZXJJZFBhcmFtICE9PSB1bmRlZmluZWQgJiYgZmlsdGVyUm91dGVySWRQYXJhbSA+IDAgPyBmaWx0ZXJSb3V0ZXJJZFBhcmFtIDogdW5kZWZpbmVkXG5cbiAgICBjb25zdCBwYWdlID0gcGFyc2VOdW1lcmljKGJvZHkucGFnZSlcbiAgICBjb25zdCBwYWdlU2l6ZSA9IHBhcnNlTnVtZXJpYyhib2R5LnBhZ2VTaXplKVxuICAgIGNvbnN0IHNlYXJjaCA9IHR5cGVvZiBib2R5LnNlYXJjaCA9PT0gXCJzdHJpbmdcIiA/IGJvZHkuc2VhcmNoIDogdW5kZWZpbmVkXG5cbiAgICBhd2FpdCBjcmVhdGVDbGllbnQoe1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBpcEFkZHJlc3M6IGlwQWRkcmVzc1JhdyxcbiAgICAgIHR5cGU6IHR5cGVSYXcsXG4gICAgICBzdGF0dXM6IHN0YXR1c1JhdyA9PT0gXCJub25ha3RpZlwiID8gXCJub25ha3RpZlwiIDogXCJha3RpZlwiLFxuICAgICAgcHJvZmlsZTogcHJvZmlsZVJhdyxcbiAgICAgIGNvbW1lbnQ6IGNvbW1lbnRSYXcsXG4gICAgICByb3V0ZXJJZDogY2xpZW50Um91dGVySWQsXG4gICAgfSlcblxuICAgIGNvbnN0IFtyZXN1bHQsIHJvdXRlcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgZmV0Y2hDbGllbnRzKHtcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcGFnZVNpemUsXG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgcm91dGVySWQ6IGZpbHRlclJvdXRlcklkLFxuICAgICAgfSksXG4gICAgICBmZXRjaFJvdXRlcnMoKSxcbiAgICBdKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICAuLi50b0FwaVJlc3BvbnNlKHJlc3VsdCwgeyByb3V0ZXJzIH0pLFxuICAgICAgICBtZXNzYWdlOiBcIkNsaWVudCBiZXJoYXNpbCBkaXRhbWJhaGthbi5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAxIH0sXG4gICAgKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbYXBpL2NsaWVudHNdIGZhaWxlZCB0byBjcmVhdGVcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkdhZ2FsIG1lbmFtYmFoa2FuIGNsaWVudCBiYXJ1LlwiLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfSxcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCByZXF1ZXN0Lmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICBjb25zdCBpZCA9IHR5cGVvZiBib2R5LmlkID09PSBcIm51bWJlclwiID8gYm9keS5pZCA6IE51bWJlcihib2R5LmlkKVxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlkKSB8fCBpZCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJRCBjbGllbnQgdGlkYWsgdmFsaWQuXCIpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlcm5hbWUgPSB0eXBlb2YgYm9keS51c2VybmFtZSA9PT0gXCJzdHJpbmdcIiA/IGJvZHkudXNlcm5hbWUudHJpbSgpIDogdW5kZWZpbmVkXG4gICAgY29uc3QgaXBBZGRyZXNzVmFsdWUgPSBib2R5LmlwQWRkcmVzc1xuICAgIGNvbnN0IGlwQWRkcmVzcyA9XG4gICAgICBpcEFkZHJlc3NWYWx1ZSA9PT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgaXBBZGRyZXNzVmFsdWUgPT09IFwic3RyaW5nXCIgPyBpcEFkZHJlc3NWYWx1ZS50cmltKCkgOiB1bmRlZmluZWRcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGJvZHkudHlwZSA9PT0gXCJzdHJpbmdcIiA/IGJvZHkudHlwZS50cmltKCkgOiB1bmRlZmluZWRcbiAgICBjb25zdCBzdGF0dXNSYXcgPSB0eXBlb2YgYm9keS5zdGF0dXMgPT09IFwic3RyaW5nXCIgPyBib2R5LnN0YXR1cy50cmltKCkudG9Mb3dlckNhc2UoKSA6IHVuZGVmaW5lZFxuICAgIGNvbnN0IHN0YXR1cyA9XG4gICAgICBzdGF0dXNSYXcgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHN0YXR1c1JhdyA9PT0gXCJub25ha3RpZlwiID8gXCJub25ha3RpZlwiIDogc3RhdHVzUmF3ID09PSBcImFrdGlmXCIgPyBcImFrdGlmXCIgOiB1bmRlZmluZWRcbiAgICBjb25zdCBwcm9maWxlVmFsdWUgPSBib2R5LnByb2ZpbGVcbiAgICBjb25zdCBwcm9maWxlID1cbiAgICAgIHByb2ZpbGVWYWx1ZSA9PT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgcHJvZmlsZVZhbHVlID09PSBcInN0cmluZ1wiID8gcHJvZmlsZVZhbHVlLnRyaW0oKSA6IHVuZGVmaW5lZFxuICAgIGNvbnN0IGNvbW1lbnRWYWx1ZSA9IGJvZHkuY29tbWVudFxuICAgIGNvbnN0IGNvbW1lbnQgPVxuICAgICAgY29tbWVudFZhbHVlID09PSBudWxsID8gbnVsbCA6IHR5cGVvZiBjb21tZW50VmFsdWUgPT09IFwic3RyaW5nXCIgPyBjb21tZW50VmFsdWUudHJpbSgpIDogdW5kZWZpbmVkXG4gICAgY29uc3Qgcm91dGVySWRQYXJhbSA9IHBhcnNlTnVtZXJpYyhib2R5LnJvdXRlcklkKVxuICAgIGNvbnN0IHJvdXRlcklkID1cbiAgICAgIHJvdXRlcklkUGFyYW0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHJvdXRlcklkUGFyYW0gPiAwID8gcm91dGVySWRQYXJhbSA6IHJvdXRlcklkUGFyYW0gPT09IDAgPyBudWxsIDogdW5kZWZpbmVkXG5cbiAgICBjb25zdCBwYWdlID0gcGFyc2VOdW1lcmljKGJvZHkucGFnZSlcbiAgICBjb25zdCBwYWdlU2l6ZSA9IHBhcnNlTnVtZXJpYyhib2R5LnBhZ2VTaXplKVxuICAgIGNvbnN0IHNlYXJjaCA9IHR5cGVvZiBib2R5LnNlYXJjaCA9PT0gXCJzdHJpbmdcIiA/IGJvZHkuc2VhcmNoIDogdW5kZWZpbmVkXG4gICAgY29uc3QgZmlsdGVyUm91dGVySWRQYXJhbSA9IHBhcnNlTnVtZXJpYyhib2R5LmZpbHRlclJvdXRlcklkID8/IGJvZHkuYWN0aXZlUm91dGVySWQpXG4gICAgY29uc3QgZmlsdGVyUm91dGVySWQgPVxuICAgICAgZmlsdGVyUm91dGVySWRQYXJhbSAhPT0gdW5kZWZpbmVkICYmIGZpbHRlclJvdXRlcklkUGFyYW0gPiAwID8gZmlsdGVyUm91dGVySWRQYXJhbSA6IHVuZGVmaW5lZFxuXG4gICAgYXdhaXQgdXBkYXRlQ2xpZW50KGlkLCB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHR5cGUsXG4gICAgICBzdGF0dXMsXG4gICAgICBwcm9maWxlLFxuICAgICAgY29tbWVudCxcbiAgICAgIHJvdXRlcklkLFxuICAgIH0pXG5cbiAgICBjb25zdCBbcmVzdWx0LCByb3V0ZXJzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGZldGNoQ2xpZW50cyh7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBzZWFyY2gsXG4gICAgICAgIHJvdXRlcklkOiBmaWx0ZXJSb3V0ZXJJZCxcbiAgICAgIH0pLFxuICAgICAgZmV0Y2hSb3V0ZXJzKCksXG4gICAgXSlcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgLi4udG9BcGlSZXNwb25zZShyZXN1bHQsIHsgcm91dGVycyB9KSxcbiAgICAgICAgbWVzc2FnZTogXCJDbGllbnQgYmVyaGFzaWwgZGlwZXJiYXJ1aS5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAwIH0sXG4gICAgKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbYXBpL2NsaWVudHNdIGZhaWxlZCB0byBlZGl0XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJHYWdhbCBtZW1wZXJiYXJ1aSBjbGllbnQuXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9LFxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBpZFBhcmFtID0gc2VhcmNoUGFyYW1zLmdldChcImlkXCIpXG4gICAgY29uc3QgaWQgPSBpZFBhcmFtID8gTnVtYmVyKGlkUGFyYW0pIDogTmFOXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaWQpIHx8IGlkIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklEIGNsaWVudCB0aWRhayB2YWxpZC5cIilcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlID0gcGFyc2VOdW1lcmljKHNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlXCIpKVxuICAgIGNvbnN0IHBhZ2VTaXplID0gcGFyc2VOdW1lcmljKHNlYXJjaFBhcmFtcy5nZXQoXCJwYWdlU2l6ZVwiKSlcbiAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2VhcmNoXCIpID8/IHVuZGVmaW5lZFxuICAgIGNvbnN0IHJvdXRlckZpbHRlclBhcmFtID0gcGFyc2VOdW1lcmljKHNlYXJjaFBhcmFtcy5nZXQoXCJyb3V0ZXJJZFwiKSlcbiAgICBjb25zdCByb3V0ZXJJZCA9XG4gICAgICByb3V0ZXJGaWx0ZXJQYXJhbSAhPT0gdW5kZWZpbmVkICYmIHJvdXRlckZpbHRlclBhcmFtID4gMCA/IHJvdXRlckZpbHRlclBhcmFtIDogdW5kZWZpbmVkXG5cbiAgICBhd2FpdCBkZWxldGVDbGllbnQoaWQpXG5cbiAgICBjb25zdCBbcmVzdWx0LCByb3V0ZXJzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGZldGNoQ2xpZW50cyh7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBzZWFyY2gsXG4gICAgICAgIHJvdXRlcklkLFxuICAgICAgfSksXG4gICAgICBmZXRjaFJvdXRlcnMoKSxcbiAgICBdKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICAuLi50b0FwaVJlc3BvbnNlKHJlc3VsdCwgeyByb3V0ZXJzIH0pLFxuICAgICAgICBtZXNzYWdlOiBcIkNsaWVudCBiZXJoYXNpbCBkaWhhcHVzLlwiLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiAyMDAgfSxcbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlthcGkvY2xpZW50c10gZmFpbGVkIHRvIGRlbGV0ZVwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiR2FnYWwgbWVuZ2hhcHVzIGNsaWVudC5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNDAwIH0sXG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50IiwiZGVsZXRlQ2xpZW50IiwiZmV0Y2hDbGllbnRzIiwiZmV0Y2hSb3V0ZXJzIiwidXBkYXRlQ2xpZW50IiwidXBkYXRlQ2xpZW50U3RhdHVzIiwibm9ybWFsaXplQ2xpZW50Um93Iiwicm93IiwiaWQiLCJ1c2VybmFtZSIsImlwQWRkcmVzcyIsImlwX2FkZHJlc3MiLCJ0eXBlIiwic3RhdHVzIiwicHJvZmlsZSIsIm9yaWdpbmFsUHJvZmlsZSIsInByb2ZpbGVfYXNsaSIsImNvbW1lbnQiLCJyb3V0ZXJJZCIsInJvdXRlcl9pZCIsInJvdXRlck5hbWUiLCJyb3V0ZXJfbmFtZSIsInRvQXBpUmVzcG9uc2UiLCJwYXlsb2FkIiwiZXh0cmFzIiwiaXRlbXMiLCJwYWdlIiwicGFnZVNpemUiLCJ0b3RhbEl0ZW1zIiwidG90YWxQYWdlcyIsInNlYXJjaCIsInBhZ2luYXRpb24iLCJoYXNOZXh0IiwiaGFzUHJldmlvdXMiLCJtYXAiLCJwYXJzZU51bWVyaWMiLCJ2YWx1ZSIsIk51bWJlciIsImlzRmluaXRlIiwicGFyc2VkIiwidW5kZWZpbmVkIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsInNlYXJjaFBhcmFtIiwicm91dGVySWRQYXJhbSIsInJlc3VsdCIsInJvdXRlcnMiLCJQcm9taXNlIiwiYWxsIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJQQVRDSCIsImJvZHkiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJyb3V0ZXJJZEJvZHkiLCJFcnJvciIsIlBPU1QiLCJpcEFkZHJlc3NSYXciLCJ0eXBlUmF3Iiwic3RhdHVzUmF3IiwicHJvZmlsZVJhdyIsImNvbW1lbnRSYXciLCJjbGllbnRSb3V0ZXJJZFBhcmFtIiwiY2xpZW50Um91dGVySWQiLCJmaWx0ZXJSb3V0ZXJJZFBhcmFtIiwiZmlsdGVyUm91dGVySWQiLCJhY3RpdmVSb3V0ZXJJZCIsIlBVVCIsImlwQWRkcmVzc1ZhbHVlIiwicHJvZmlsZVZhbHVlIiwiY29tbWVudFZhbHVlIiwiREVMRVRFIiwiaWRQYXJhbSIsIk5hTiIsInJvdXRlckZpbHRlclBhcmFtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/clients/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessPoint: () => (/* binding */ createAccessPoint),\n/* harmony export */   createAktivasiClient: () => (/* binding */ createAktivasiClient),\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   createPendingItem: () => (/* binding */ createPendingItem),\n/* harmony export */   deleteAccessPoint: () => (/* binding */ deleteAccessPoint),\n/* harmony export */   deleteClient: () => (/* binding */ deleteClient),\n/* harmony export */   deletePendingItem: () => (/* binding */ deletePendingItem),\n/* harmony export */   fetchAccessPoints: () => (/* binding */ fetchAccessPoints),\n/* harmony export */   fetchClients: () => (/* binding */ fetchClients),\n/* harmony export */   fetchPendingItems: () => (/* binding */ fetchPendingItems),\n/* harmony export */   fetchRouters: () => (/* binding */ fetchRouters),\n/* harmony export */   mysqlPool: () => (/* binding */ mysqlPool),\n/* harmony export */   updateAccessPoint: () => (/* binding */ updateAccessPoint),\n/* harmony export */   updateClient: () => (/* binding */ updateClient),\n/* harmony export */   updateClientStatus: () => (/* binding */ updateClientStatus),\n/* harmony export */   verifyAdminCredentials: () => (/* binding */ verifyAdminCredentials)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\n\nconst config = {\n    host: \"localhost\",\n    database: \"router_db\",\n    user: \"Harr\",\n    password: \"gmdp@2025\",\n    charset: \"utf8mb4\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    namedPlaceholders: true\n};\nconst globalForPool = globalThis;\nconst mysqlPool = globalForPool.__mysqlPool ?? mysql2_promise__WEBPACK_IMPORTED_MODULE_1__.createPool({\n    ...config,\n    // Ensure we always get plain objects back\n    decimalNumbers: true\n});\nif (!globalForPool.__mysqlPool) {\n    globalForPool.__mysqlPool = mysqlPool;\n}\nasync function fetchAccessPoints() {\n    const [rows] = await mysqlPool.query(`SELECT\n      ap.id,\n      ap.ssid,\n      ap.bts_name,\n      ap.ip_address,\n      ap.device,\n      ap.username,\n      ap.password,\n      ap.security,\n      ap.phrase_key,\n      ap.frequency,\n      ap.channel_width,\n      ap.mac_address,\n      ap.router_id,\n      r.name AS router_name\n    FROM access_points ap\n    LEFT JOIN routers r ON r.id = ap.router_id\n    ORDER BY\n      (ap.bts_name IS NULL OR ap.bts_name = ''),\n      ap.bts_name ASC,\n      ap.ssid ASC`);\n    return rows;\n}\nconst WIB_TIMEZONE = \"Asia/Jakarta\";\nconst ONE_DAY_MS = 24 * 60 * 60 * 1000;\nfunction formatDateToMySQL(timezone, date = new Date()) {\n    const formatter = new Intl.DateTimeFormat(\"sv-SE\", {\n        timeZone: timezone,\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        hour12: false\n    });\n    const parts = formatter.formatToParts(date).reduce((acc, part)=>{\n        if (part.type !== \"literal\") {\n            acc[part.type] = part.value.padStart(part.type === \"day\" || part.type === \"month\" || part.type === \"hour\" || part.type === \"minute\" || part.type === \"second\" ? 2 : 0, \"0\");\n        }\n        return acc;\n    }, {});\n    return `${parts.year}-${parts.month}-${parts.day} ${parts.hour ?? \"00\"}:${parts.minute ?? \"00\"}:${parts.second ?? \"00\"}`;\n}\nasync function fetchPendingItems() {\n    const now = new Date();\n    const thresholdDate = new Date(now.getTime() - ONE_DAY_MS);\n    const threshold = formatDateToMySQL(WIB_TIMEZONE, thresholdDate);\n    await mysqlPool.query(\"DELETE FROM pending_list WHERE created_at < ?\", [\n        threshold\n    ]);\n    const [rows] = await mysqlPool.query(`SELECT id, customer_name, description, address, kabupaten, created_at\n     FROM pending_list\n     WHERE created_at >= ?\n     ORDER BY created_at DESC`, [\n        threshold\n    ]);\n    return rows;\n}\nasync function createPendingItem(payload) {\n    const createdAt = formatDateToMySQL(WIB_TIMEZONE);\n    const [result] = await mysqlPool.query(`INSERT INTO pending_list (customer_name, description, address, kabupaten, created_at)\n     VALUES (?, ?, ?, ?, ?)`, [\n        payload.customerName,\n        payload.description,\n        payload.address,\n        payload.kabupaten,\n        createdAt\n    ]);\n    return result.insertId;\n}\nasync function deletePendingItem(id) {\n    await mysqlPool.query(\"DELETE FROM pending_list WHERE id = ?\", [\n        id\n    ]);\n}\nasync function verifyAdminCredentials(username, password) {\n    const [rows] = await mysqlPool.query(\"SELECT id, username, password FROM admin_users WHERE username = ? LIMIT 1\", [\n        username\n    ]);\n    if (!rows.length) {\n        return null;\n    }\n    const stored = rows[0].password ?? \"\";\n    if (!stored) {\n        return null;\n    }\n    const candidates = [\n        password\n    ];\n    if (/^[a-f0-9]{64}$/i.test(stored)) {\n        candidates.push(hashWithAlgorithm(\"sha256\", password));\n    }\n    if (/^[a-f0-9]{32}$/i.test(stored)) {\n        candidates.push(hashWithAlgorithm(\"md5\", password));\n    }\n    const isMatch = candidates.some((candidate)=>timingSafeCompare(stored, candidate));\n    if (!isMatch) {\n        return null;\n    }\n    return {\n        id: rows[0].id,\n        username: rows[0].username\n    };\n}\nconst DEFAULT_CLIENT_PAGE_SIZE = 21;\nconst MAX_CLIENT_PAGE_SIZE = 200;\nasync function fetchClients(options = {}) {\n    const rawPage = Number.isFinite(options.page) ? Number(options.page) : 1;\n    const rawPageSize = Number.isFinite(options.pageSize) ? Number(options.pageSize) : DEFAULT_CLIENT_PAGE_SIZE;\n    const pageSize = Math.min(Math.max(Math.floor(rawPageSize) || DEFAULT_CLIENT_PAGE_SIZE, 1), MAX_CLIENT_PAGE_SIZE);\n    const searchTerm = (options.search ?? \"\").trim();\n    const rawRouterId = Number.isFinite(options.routerId) ? Number(options.routerId) : null;\n    const routerId = rawRouterId && rawRouterId > 0 ? rawRouterId : null;\n    const likeTerm = searchTerm ? `%${searchTerm.replace(/\\s+/g, \"%\")}%` : null;\n    const searchParams = likeTerm ? [\n        likeTerm,\n        likeTerm,\n        likeTerm,\n        likeTerm,\n        likeTerm,\n        likeTerm,\n        likeTerm\n    ] : [];\n    const whereParts = [];\n    const whereParams = [];\n    if (likeTerm) {\n        whereParts.push(`(\n      u.username LIKE ?\n      OR u.ip_address LIKE ?\n      OR u.type LIKE ?\n      OR u.status LIKE ?\n      OR u.profile LIKE ?\n      OR u.comment LIKE ?\n      OR r.name LIKE ?\n    )`);\n        whereParams.push(...searchParams);\n    }\n    if (routerId !== null) {\n        whereParts.push(\"u.router_id = ?\");\n        whereParams.push(routerId);\n    }\n    const whereClause = whereParts.length > 0 ? `WHERE ${whereParts.join(\" AND \")}` : \"\";\n    const [countRows] = await mysqlPool.query(`SELECT COUNT(*) AS total\n     FROM users u\n     LEFT JOIN routers r ON r.id = u.router_id\n     ${whereClause}`, whereParams);\n    const totalItems = countRows[0]?.total ?? 0;\n    const totalPages = totalItems === 0 ? 0 : Math.ceil(totalItems / pageSize);\n    const safePage = totalPages === 0 ? 1 : Math.min(Math.max(Math.floor(rawPage) || 1, 1), totalPages);\n    const offset = (safePage - 1) * pageSize;\n    const [rows] = await mysqlPool.query(`SELECT\n      u.id,\n      u.username,\n      u.ip_address,\n      u.type,\n      u.status,\n      u.profile,\n      u.comment,\n      u.router_id,\n      u.profile_asli,\n       r.name AS router_name\n    FROM users u\n    LEFT JOIN routers r ON r.id = u.router_id\n    ${whereClause}\n    ORDER BY u.updated_at DESC, u.username ASC\n    LIMIT ?\n    OFFSET ?`, [\n        ...whereParams,\n        pageSize,\n        offset\n    ]);\n    return {\n        items: rows,\n        page: safePage,\n        pageSize,\n        totalItems,\n        totalPages,\n        search: searchTerm,\n        routerId\n    };\n}\nasync function updateClientStatus(id, status) {\n    const [rows] = await mysqlPool.query(`SELECT type, profile, profile_asli FROM users WHERE id = ? LIMIT 1`, [\n        id\n    ]);\n    if (!rows.length) {\n        throw new Error(\"Client tidak ditemukan.\");\n    }\n    const row = rows[0];\n    const currentProfile = row.profile ?? null;\n    const storedOriginalProfile = row.profile_asli?.trim() ? row.profile_asli : null;\n    const type = row.type?.trim().toLowerCase() ?? null;\n    if (status === \"nonaktif\") {\n        const originalProfile = storedOriginalProfile ?? currentProfile ?? null;\n        await mysqlPool.query(`UPDATE users\n       SET\n         status = 'nonaktif',\n         profile_asli = COALESCE(NULLIF(profile_asli, ''), ?),\n         profile = 'isolir',\n         manual_override = 1,\n         updated_at = NOW()\n       WHERE id = ?`, [\n            originalProfile,\n            id\n        ]);\n    } else {\n        const nextProfile = type === \"pppoe\" ? storedOriginalProfile ?? \"normal\" : \"normal\";\n        await mysqlPool.query(`UPDATE users\n       SET\n         status = 'aktif',\n         profile = ?,\n         manual_override = 1,\n         updated_at = NOW()\n       WHERE id = ?`, [\n            nextProfile,\n            id\n        ]);\n    }\n}\nasync function createClient(payload) {\n    const username = payload.username?.trim() ?? \"\";\n    if (!username) {\n        throw new Error(\"Username wajib diisi.\");\n    }\n    const ipAddress = payload.ipAddress?.trim() || null;\n    const rawType = payload.type?.trim() || null;\n    const type = rawType ? rawType.toLowerCase() : null;\n    const status = payload.status === \"nonaktif\" ? \"nonaktif\" : \"aktif\";\n    const comment = payload.comment?.trim() || null;\n    const numericRouterId = typeof payload.routerId === \"number\" && Number.isFinite(payload.routerId) && payload.routerId > 0 ? Math.floor(payload.routerId) : null;\n    const baseProfile = payload.profile?.trim() || (type === \"pppoe\" ? \"normal\" : null);\n    const profile = status === \"nonaktif\" ? \"isolir\" : baseProfile;\n    const profileAsli = baseProfile;\n    const [result] = await mysqlPool.query(`INSERT INTO users (\n      username,\n      ip_address,\n      type,\n      status,\n      profile,\n      profile_asli,\n      comment,\n      router_id,\n      manual_override,\n      created_at,\n      updated_at\n    )\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, 1, NOW(), NOW())`, [\n        username,\n        ipAddress,\n        type,\n        status,\n        profile,\n        profileAsli,\n        comment,\n        numericRouterId\n    ]);\n    return result.insertId;\n}\nasync function createAktivasiClient(payload) {\n    const [result] = await mysqlPool.query(`INSERT INTO aktivasi_clients (\n      nama_pelanggan,\n      nama_layanan,\n      kapasitas_layanan,\n      vlan_id,\n      nama_metro,\n      site_metro,\n      kapasitas_metro,\n      ip_address,\n      ip_gateway,\n      router_gateway,\n      created_by,\n      created_at,\n      updated_at\n    )\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())`, [\n        payload.namaPelanggan.trim(),\n        payload.namaLayanan.trim(),\n        payload.kapasitasLayanan.trim(),\n        payload.vlanId.trim(),\n        payload.namaMetro.trim(),\n        payload.siteMetro.trim(),\n        payload.kapasitasMetro.trim(),\n        payload.ipAddress.trim(),\n        payload.ipGateway.trim(),\n        payload.routerGateway.trim(),\n        payload.createdBy.trim()\n    ]);\n    return result.insertId;\n}\nasync function updateClient(id, payload) {\n    if (!Number.isFinite(id) || id <= 0) {\n        throw new Error(\"ID client tidak valid.\");\n    }\n    const [rows] = await mysqlPool.query(`SELECT username, ip_address, type, status, profile, profile_asli, comment, router_id\n     FROM users\n     WHERE id = ?\n     LIMIT 1`, [\n        id\n    ]);\n    if (!rows.length) {\n        throw new Error(\"Client tidak ditemukan.\");\n    }\n    const existing = rows[0];\n    const usernameRaw = payload.username !== undefined ? payload.username : existing.username;\n    const username = usernameRaw?.trim();\n    if (!username) {\n        throw new Error(\"Username wajib diisi.\");\n    }\n    const ipRaw = payload.ipAddress !== undefined ? payload.ipAddress : existing.ip_address;\n    const ipAddress = ipRaw ? ipRaw.trim() : null;\n    const typeRaw = payload.type !== undefined ? payload.type : existing.type;\n    const type = typeRaw ? typeRaw.trim().toLowerCase() || null : null;\n    const commentRaw = payload.comment !== undefined ? payload.comment : existing.comment;\n    const comment = commentRaw ? commentRaw.trim() : null;\n    const routerValue = payload.routerId !== undefined ? payload.routerId : existing.router_id;\n    const routerId = typeof routerValue === \"number\" && Number.isFinite(routerValue) && routerValue > 0 ? Math.floor(routerValue) : null;\n    const statusInput = payload.status ?? (existing.status === \"nonaktif\" ? \"nonaktif\" : \"aktif\");\n    const status = statusInput === \"nonaktif\" ? \"nonaktif\" : \"aktif\";\n    const profileInputRaw = payload.profile !== undefined ? payload.profile : null;\n    const profileInput = profileInputRaw ? profileInputRaw.trim() : null;\n    const existingProfile = existing.profile?.trim() || null;\n    const existingProfileAsli = existing.profile_asli?.trim() || null;\n    let profile = existingProfile;\n    let profileAsli = existingProfileAsli;\n    if (status === \"nonaktif\") {\n        const originalProfile = profileInput ?? profileAsli ?? existingProfile ?? (type === \"pppoe\" ? \"normal\" : null);\n        profileAsli = originalProfile;\n        profile = \"isolir\";\n    } else {\n        const baseProfile = profileInput ?? profileAsli ?? (existingProfile !== \"isolir\" ? existingProfile : null) ?? (type === \"pppoe\" ? \"normal\" : null);\n        profileAsli = baseProfile;\n        profile = baseProfile;\n    }\n    await mysqlPool.query(`UPDATE users\n     SET\n       username = ?,\n       ip_address = ?,\n       type = ?,\n       status = ?,\n       profile = ?,\n       profile_asli = ?,\n       comment = ?,\n       router_id = ?,\n       manual_override = 1,\n       updated_at = NOW()\n     WHERE id = ?`, [\n        username,\n        ipAddress,\n        type,\n        status,\n        profile,\n        profileAsli,\n        comment,\n        routerId,\n        id\n    ]);\n}\nasync function deleteClient(id) {\n    if (!Number.isFinite(id) || id <= 0) {\n        throw new Error(\"ID client tidak valid.\");\n    }\n    const [result] = await mysqlPool.query(\"DELETE FROM users WHERE id = ?\", [\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        throw new Error(\"Client tidak ditemukan.\");\n    }\n}\nfunction timingSafeCompare(a, b) {\n    const bufA = Buffer.from(a || \"\");\n    const bufB = Buffer.from(b || \"\");\n    if (bufA.length === bufB.length) {\n        return crypto__WEBPACK_IMPORTED_MODULE_0___default().timingSafeEqual(bufA, bufB);\n    }\n    const len = Math.max(bufA.length, bufB.length);\n    const paddedA = Buffer.alloc(len);\n    const paddedB = Buffer.alloc(len);\n    bufA.copy(paddedA);\n    bufB.copy(paddedB);\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().timingSafeEqual(paddedA, paddedB) && a === b;\n}\nfunction hashWithAlgorithm(algorithm, value) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(algorithm).update(value).digest(\"hex\");\n}\nasync function fetchRouters() {\n    const [rows] = await mysqlPool.query(\"SELECT id, name FROM routers ORDER BY name ASC\");\n    return rows;\n}\nasync function createAccessPoint(payload) {\n    const [result] = await mysqlPool.query(`INSERT INTO access_points (\n      ssid,\n      bts_name,\n      ip_address,\n      device,\n      username,\n      password,\n      security,\n      phrase_key,\n      frequency,\n      channel_width,\n      mac_address,\n      router_id,\n      created_at\n    )\n    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW())`, [\n        payload.ssid,\n        payload.btsName,\n        payload.ipAddress,\n        payload.device,\n        payload.username,\n        payload.password,\n        payload.security,\n        payload.phraseKey,\n        payload.frequency,\n        payload.channelWidth,\n        payload.macAddress,\n        payload.routerId\n    ]);\n    return result.insertId;\n}\nasync function updateAccessPoint(id, payload) {\n    await mysqlPool.query(`UPDATE access_points\n     SET ssid = ?, bts_name = ?, ip_address = ?, device = ?, username = ?, password = ?, security = ?, phrase_key = ?, frequency = ?, channel_width = ?, mac_address = ?, router_id = ?\n     WHERE id = ?`, [\n        payload.ssid,\n        payload.btsName,\n        payload.ipAddress,\n        payload.device,\n        payload.username,\n        payload.password,\n        payload.security,\n        payload.phraseKey,\n        payload.frequency,\n        payload.channelWidth,\n        payload.macAddress,\n        payload.routerId,\n        id\n    ]);\n}\nasync function deleteAccessPoint(id) {\n    await mysqlPool.query(\"DELETE FROM access_points WHERE id = ?\", [\n        id\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxPQUFPO1FBQ2Z6SCxRQUFRb0UsU0FBUztRQUNqQnBFLFFBQVEwSCxNQUFNO1FBQ2QxSCxRQUFRVyxRQUFRO1FBQ2hCWCxRQUFRN0MsUUFBUTtRQUNoQjZDLFFBQVEySCxRQUFRO1FBQ2hCM0gsUUFBUTRILFNBQVM7UUFDakI1SCxRQUFRNkgsU0FBUztRQUNqQjdILFFBQVE4SCxZQUFZO1FBQ3BCOUgsUUFBUStILFVBQVU7UUFDbEIvSCxRQUFRd0MsUUFBUTtRQUNoQi9CO0tBQ0Q7QUFFTDtBQUVPLGVBQWV3SCxrQkFBa0J4SCxFQUFVO0lBQ2hELE1BQU0vQyxVQUFVTSxLQUFLLENBQUMsMENBQTBDO1FBQUN5QztLQUFHO0FBQ3RFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFuZWwtbm9jLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgdHlwZSB7IFBvb2xPcHRpb25zIH0gZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5cbnR5cGUgUm93RGF0YVBhY2tldCA9IG15c3FsLlJvd0RhdGFQYWNrZXQ7XG5cbnR5cGUgR2xvYmFsV2l0aFBvb2wgPSB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcbiAgX19teXNxbFBvb2w/OiBteXNxbC5Qb29sO1xufTtcblxuY29uc3QgY29uZmlnOiBQb29sT3B0aW9ucyA9IHtcbiAgaG9zdDogXCJsb2NhbGhvc3RcIixcbiAgZGF0YWJhc2U6IFwicm91dGVyX2RiXCIsXG4gIHVzZXI6IFwiSGFyclwiLFxuICBwYXNzd29yZDogXCJnbWRwQDIwMjVcIixcbiAgY2hhcnNldDogXCJ1dGY4bWI0XCIsXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcbiAgY29ubmVjdGlvbkxpbWl0OiAxMCxcbiAgbmFtZWRQbGFjZWhvbGRlcnM6IHRydWUsXG59O1xuXG5jb25zdCBnbG9iYWxGb3JQb29sID0gZ2xvYmFsVGhpcyBhcyBHbG9iYWxXaXRoUG9vbDtcblxuZXhwb3J0IGNvbnN0IG15c3FsUG9vbCA9XG4gIGdsb2JhbEZvclBvb2wuX19teXNxbFBvb2wgPz9cbiAgbXlzcWwuY3JlYXRlUG9vbCh7XG4gICAgLi4uY29uZmlnLFxuICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgZ2V0IHBsYWluIG9iamVjdHMgYmFja1xuICAgIGRlY2ltYWxOdW1iZXJzOiB0cnVlLFxuICB9KTtcblxuaWYgKCFnbG9iYWxGb3JQb29sLl9fbXlzcWxQb29sKSB7XG4gIGdsb2JhbEZvclBvb2wuX19teXNxbFBvb2wgPSBteXNxbFBvb2w7XG59XG5cbmV4cG9ydCB0eXBlIEFjY2Vzc1BvaW50Um93ID0gUm93RGF0YVBhY2tldCAmIHtcbiAgaWQ6IG51bWJlcjtcbiAgc3NpZDogc3RyaW5nIHwgbnVsbDtcbiAgYnRzX25hbWU6IHN0cmluZyB8IG51bGw7XG4gIGlwX2FkZHJlc3M6IHN0cmluZyB8IG51bGw7XG4gIGRldmljZTogc3RyaW5nIHwgbnVsbDtcbiAgdXNlcm5hbWU6IHN0cmluZyB8IG51bGw7XG4gIHBhc3N3b3JkOiBzdHJpbmcgfCBudWxsO1xuICBzZWN1cml0eTogc3RyaW5nIHwgbnVsbDtcbiAgcGhyYXNlX2tleTogc3RyaW5nIHwgbnVsbDtcbiAgZnJlcXVlbmN5OiBzdHJpbmcgfCBudWxsO1xuICBjaGFubmVsX3dpZHRoOiBzdHJpbmcgfCBudWxsO1xuICBtYWNfYWRkcmVzczogc3RyaW5nIHwgbnVsbDtcbiAgcm91dGVyX2lkOiBudW1iZXIgfCBudWxsO1xuICByb3V0ZXJfbmFtZTogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFjY2Vzc1BvaW50cygpOiBQcm9taXNlPEFjY2Vzc1BvaW50Um93W10+IHtcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PEFjY2Vzc1BvaW50Um93W10+KFxuICAgIGBTRUxFQ1RcbiAgICAgIGFwLmlkLFxuICAgICAgYXAuc3NpZCxcbiAgICAgIGFwLmJ0c19uYW1lLFxuICAgICAgYXAuaXBfYWRkcmVzcyxcbiAgICAgIGFwLmRldmljZSxcbiAgICAgIGFwLnVzZXJuYW1lLFxuICAgICAgYXAucGFzc3dvcmQsXG4gICAgICBhcC5zZWN1cml0eSxcbiAgICAgIGFwLnBocmFzZV9rZXksXG4gICAgICBhcC5mcmVxdWVuY3ksXG4gICAgICBhcC5jaGFubmVsX3dpZHRoLFxuICAgICAgYXAubWFjX2FkZHJlc3MsXG4gICAgICBhcC5yb3V0ZXJfaWQsXG4gICAgICByLm5hbWUgQVMgcm91dGVyX25hbWVcbiAgICBGUk9NIGFjY2Vzc19wb2ludHMgYXBcbiAgICBMRUZUIEpPSU4gcm91dGVycyByIE9OIHIuaWQgPSBhcC5yb3V0ZXJfaWRcbiAgICBPUkRFUiBCWVxuICAgICAgKGFwLmJ0c19uYW1lIElTIE5VTEwgT1IgYXAuYnRzX25hbWUgPSAnJyksXG4gICAgICBhcC5idHNfbmFtZSBBU0MsXG4gICAgICBhcC5zc2lkIEFTQ2BcbiAgKTtcblxuICByZXR1cm4gcm93cztcbn1cblxuZXhwb3J0IHR5cGUgUGVuZGluZ0l0ZW1Sb3cgPSBSb3dEYXRhUGFja2V0ICYge1xuICBpZDogbnVtYmVyO1xuICBjdXN0b21lcl9uYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAga2FidXBhdGVuOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG59O1xuXG5jb25zdCBXSUJfVElNRVpPTkUgPSBcIkFzaWEvSmFrYXJ0YVwiO1xuY29uc3QgT05FX0RBWV9NUyA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVUb015U1FMKHRpbWV6b25lOiBzdHJpbmcsIGRhdGUgPSBuZXcgRGF0ZSgpKTogc3RyaW5nIHtcbiAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJzdi1TRVwiLCB7XG4gICAgdGltZVpvbmU6IHRpbWV6b25lLFxuICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICBkYXk6IFwiMi1kaWdpdFwiLFxuICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICBob3VyMTI6IGZhbHNlLFxuICB9KTtcbiAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyhkYXRlKS5yZWR1Y2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oKGFjYywgcGFydCkgPT4ge1xuICAgIGlmIChwYXJ0LnR5cGUgIT09IFwibGl0ZXJhbFwiKSB7XG4gICAgICBhY2NbcGFydC50eXBlXSA9IHBhcnQudmFsdWUucGFkU3RhcnQocGFydC50eXBlID09PSBcImRheVwiIHx8IHBhcnQudHlwZSA9PT0gXCJtb250aFwiIHx8IHBhcnQudHlwZSA9PT0gXCJob3VyXCIgfHwgcGFydC50eXBlID09PSBcIm1pbnV0ZVwiIHx8IHBhcnQudHlwZSA9PT0gXCJzZWNvbmRcIiA/IDIgOiAwLCBcIjBcIik7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcblxuICByZXR1cm4gYCR7cGFydHMueWVhcn0tJHtwYXJ0cy5tb250aH0tJHtwYXJ0cy5kYXl9ICR7cGFydHMuaG91ciA/PyBcIjAwXCJ9OiR7cGFydHMubWludXRlID8/IFwiMDBcIn06JHtwYXJ0cy5zZWNvbmQgPz8gXCIwMFwifWA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFBlbmRpbmdJdGVtcygpOiBQcm9taXNlPFBlbmRpbmdJdGVtUm93W10+IHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgdGhyZXNob2xkRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSBPTkVfREFZX01TKTtcbiAgY29uc3QgdGhyZXNob2xkID0gZm9ybWF0RGF0ZVRvTXlTUUwoV0lCX1RJTUVaT05FLCB0aHJlc2hvbGREYXRlKTtcblxuICBhd2FpdCBteXNxbFBvb2wucXVlcnkoXCJERUxFVEUgRlJPTSBwZW5kaW5nX2xpc3QgV0hFUkUgY3JlYXRlZF9hdCA8ID9cIiwgW3RocmVzaG9sZF0pO1xuXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IG15c3FsUG9vbC5xdWVyeTxQZW5kaW5nSXRlbVJvd1tdPihcbiAgICBgU0VMRUNUIGlkLCBjdXN0b21lcl9uYW1lLCBkZXNjcmlwdGlvbiwgYWRkcmVzcywga2FidXBhdGVuLCBjcmVhdGVkX2F0XG4gICAgIEZST00gcGVuZGluZ19saXN0XG4gICAgIFdIRVJFIGNyZWF0ZWRfYXQgPj0gP1xuICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NgLFxuICAgIFt0aHJlc2hvbGRdLFxuICApO1xuXG4gIHJldHVybiByb3dzO1xufVxuXG50eXBlIFBlbmRpbmdQYXlsb2FkID0ge1xuICBjdXN0b21lck5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYWRkcmVzczogc3RyaW5nO1xuICBrYWJ1cGF0ZW46IHN0cmluZztcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQZW5kaW5nSXRlbShwYXlsb2FkOiBQZW5kaW5nUGF5bG9hZCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IGNyZWF0ZWRBdCA9IGZvcm1hdERhdGVUb015U1FMKFdJQl9USU1FWk9ORSk7XG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PG15c3FsLlJlc3VsdFNldEhlYWRlcj4oXG4gICAgYElOU0VSVCBJTlRPIHBlbmRpbmdfbGlzdCAoY3VzdG9tZXJfbmFtZSwgZGVzY3JpcHRpb24sIGFkZHJlc3MsIGthYnVwYXRlbiwgY3JlYXRlZF9hdClcbiAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/KWAsXG4gICAgW3BheWxvYWQuY3VzdG9tZXJOYW1lLCBwYXlsb2FkLmRlc2NyaXB0aW9uLCBwYXlsb2FkLmFkZHJlc3MsIHBheWxvYWQua2FidXBhdGVuLCBjcmVhdGVkQXRdLFxuICApO1xuXG4gIHJldHVybiByZXN1bHQuaW5zZXJ0SWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQZW5kaW5nSXRlbShpZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IG15c3FsUG9vbC5xdWVyeShcIkRFTEVURSBGUk9NIHBlbmRpbmdfbGlzdCBXSEVSRSBpZCA9ID9cIiwgW2lkXSk7XG59XG5cbnR5cGUgQWRtaW5Vc2VyUm93ID0gUm93RGF0YVBhY2tldCAmIHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QWRtaW5DcmVkZW50aWFscyh1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTx7IGlkOiBudW1iZXI7IHVzZXJuYW1lOiBzdHJpbmcgfSB8IG51bGw+IHtcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PEFkbWluVXNlclJvd1tdPihcbiAgICBcIlNFTEVDVCBpZCwgdXNlcm5hbWUsIHBhc3N3b3JkIEZST00gYWRtaW5fdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/IExJTUlUIDFcIixcbiAgICBbdXNlcm5hbWVdLFxuICApO1xuXG4gIGlmICghcm93cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHN0b3JlZCA9IHJvd3NbMF0ucGFzc3dvcmQgPz8gXCJcIjtcbiAgaWYgKCFzdG9yZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGNhbmRpZGF0ZXM6IHN0cmluZ1tdID0gW3Bhc3N3b3JkXTtcblxuICBpZiAoL15bYS1mMC05XXs2NH0kL2kudGVzdChzdG9yZWQpKSB7XG4gICAgY2FuZGlkYXRlcy5wdXNoKGhhc2hXaXRoQWxnb3JpdGhtKCdzaGEyNTYnLCBwYXNzd29yZCkpO1xuICB9XG4gIGlmICgvXlthLWYwLTldezMyfSQvaS50ZXN0KHN0b3JlZCkpIHtcbiAgICBjYW5kaWRhdGVzLnB1c2goaGFzaFdpdGhBbGdvcml0aG0oJ21kNScsIHBhc3N3b3JkKSk7XG4gIH1cblxuICBjb25zdCBpc01hdGNoID0gY2FuZGlkYXRlcy5zb21lKChjYW5kaWRhdGUpID0+IHRpbWluZ1NhZmVDb21wYXJlKHN0b3JlZCwgY2FuZGlkYXRlKSk7XG4gIGlmICghaXNNYXRjaCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHsgaWQ6IHJvd3NbMF0uaWQsIHVzZXJuYW1lOiByb3dzWzBdLnVzZXJuYW1lIH07XG59XG5cbmV4cG9ydCB0eXBlIENsaWVudFJvdyA9IFJvd0RhdGFQYWNrZXQgJiB7XG4gIGlkOiBudW1iZXI7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIGlwX2FkZHJlc3M6IHN0cmluZyB8IG51bGw7XG4gIHR5cGU6IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogc3RyaW5nIHwgbnVsbDtcbiAgcHJvZmlsZTogc3RyaW5nIHwgbnVsbDtcbiAgcHJvZmlsZV9hc2xpOiBzdHJpbmcgfCBudWxsO1xuICBjb21tZW50OiBzdHJpbmcgfCBudWxsO1xuICByb3V0ZXJfaWQ6IG51bWJlciB8IG51bGw7XG4gIHJvdXRlcl9uYW1lOiBzdHJpbmcgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgRmV0Y2hDbGllbnRzT3B0aW9ucyA9IHtcbiAgcGFnZT86IG51bWJlcjtcbiAgcGFnZVNpemU/OiBudW1iZXI7XG4gIHNlYXJjaD86IHN0cmluZztcbiAgcm91dGVySWQ/OiBudW1iZXIgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgRmV0Y2hDbGllbnRzUmVzcG9uc2UgPSB7XG4gIGl0ZW1zOiBDbGllbnRSb3dbXTtcbiAgcGFnZTogbnVtYmVyO1xuICBwYWdlU2l6ZTogbnVtYmVyO1xuICB0b3RhbEl0ZW1zOiBudW1iZXI7XG4gIHRvdGFsUGFnZXM6IG51bWJlcjtcbiAgc2VhcmNoOiBzdHJpbmc7XG4gIHJvdXRlcklkOiBudW1iZXIgfCBudWxsO1xufTtcblxuY29uc3QgREVGQVVMVF9DTElFTlRfUEFHRV9TSVpFID0gMjE7XG5jb25zdCBNQVhfQ0xJRU5UX1BBR0VfU0laRSA9IDIwMDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQ2xpZW50cyhvcHRpb25zOiBGZXRjaENsaWVudHNPcHRpb25zID0ge30pOiBQcm9taXNlPEZldGNoQ2xpZW50c1Jlc3BvbnNlPiB7XG4gIGNvbnN0IHJhd1BhZ2UgPSBOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5wYWdlKSA/IE51bWJlcihvcHRpb25zLnBhZ2UpIDogMTtcbiAgY29uc3QgcmF3UGFnZVNpemUgPSBOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5wYWdlU2l6ZSkgPyBOdW1iZXIob3B0aW9ucy5wYWdlU2l6ZSkgOiBERUZBVUxUX0NMSUVOVF9QQUdFX1NJWkU7XG4gIGNvbnN0IHBhZ2VTaXplID0gTWF0aC5taW4oTWF0aC5tYXgoTWF0aC5mbG9vcihyYXdQYWdlU2l6ZSkgfHwgREVGQVVMVF9DTElFTlRfUEFHRV9TSVpFLCAxKSwgTUFYX0NMSUVOVF9QQUdFX1NJWkUpO1xuICBjb25zdCBzZWFyY2hUZXJtID0gKG9wdGlvbnMuc2VhcmNoID8/IFwiXCIpLnRyaW0oKTtcbiAgY29uc3QgcmF3Um91dGVySWQgPSBOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5yb3V0ZXJJZCkgPyBOdW1iZXIob3B0aW9ucy5yb3V0ZXJJZCkgOiBudWxsO1xuICBjb25zdCByb3V0ZXJJZCA9IHJhd1JvdXRlcklkICYmIHJhd1JvdXRlcklkID4gMCA/IHJhd1JvdXRlcklkIDogbnVsbDtcblxuICBjb25zdCBsaWtlVGVybSA9IHNlYXJjaFRlcm0gPyBgJSR7c2VhcmNoVGVybS5yZXBsYWNlKC9cXHMrL2csIFwiJVwiKX0lYCA6IG51bGw7XG4gIGNvbnN0IHNlYXJjaFBhcmFtczogc3RyaW5nW10gPSBsaWtlVGVybVxuICAgID8gW2xpa2VUZXJtLCBsaWtlVGVybSwgbGlrZVRlcm0sIGxpa2VUZXJtLCBsaWtlVGVybSwgbGlrZVRlcm0sIGxpa2VUZXJtXVxuICAgIDogW107XG5cbiAgY29uc3Qgd2hlcmVQYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgY29uc3Qgd2hlcmVQYXJhbXM6IEFycmF5PHN0cmluZyB8IG51bWJlcj4gPSBbXTtcblxuICBpZiAobGlrZVRlcm0pIHtcbiAgICB3aGVyZVBhcnRzLnB1c2goYChcbiAgICAgIHUudXNlcm5hbWUgTElLRSA/XG4gICAgICBPUiB1LmlwX2FkZHJlc3MgTElLRSA/XG4gICAgICBPUiB1LnR5cGUgTElLRSA/XG4gICAgICBPUiB1LnN0YXR1cyBMSUtFID9cbiAgICAgIE9SIHUucHJvZmlsZSBMSUtFID9cbiAgICAgIE9SIHUuY29tbWVudCBMSUtFID9cbiAgICAgIE9SIHIubmFtZSBMSUtFID9cbiAgICApYCk7XG4gICAgd2hlcmVQYXJhbXMucHVzaCguLi5zZWFyY2hQYXJhbXMpO1xuICB9XG5cbiAgaWYgKHJvdXRlcklkICE9PSBudWxsKSB7XG4gICAgd2hlcmVQYXJ0cy5wdXNoKFwidS5yb3V0ZXJfaWQgPSA/XCIpO1xuICAgIHdoZXJlUGFyYW1zLnB1c2gocm91dGVySWQpO1xuICB9XG5cbiAgY29uc3Qgd2hlcmVDbGF1c2UgPSB3aGVyZVBhcnRzLmxlbmd0aCA+IDAgPyBgV0hFUkUgJHt3aGVyZVBhcnRzLmpvaW4oXCIgQU5EIFwiKX1gIDogXCJcIjtcblxuICBjb25zdCBbY291bnRSb3dzXSA9IGF3YWl0IG15c3FsUG9vbC5xdWVyeTxBcnJheTx7IHRvdGFsOiBudW1iZXIgfT4gJiBSb3dEYXRhUGFja2V0W10+KFxuICAgIGBTRUxFQ1QgQ09VTlQoKikgQVMgdG90YWxcbiAgICAgRlJPTSB1c2VycyB1XG4gICAgIExFRlQgSk9JTiByb3V0ZXJzIHIgT04gci5pZCA9IHUucm91dGVyX2lkXG4gICAgICR7d2hlcmVDbGF1c2V9YCxcbiAgICB3aGVyZVBhcmFtcyxcbiAgKTtcblxuICBjb25zdCB0b3RhbEl0ZW1zID0gY291bnRSb3dzWzBdPy50b3RhbCA/PyAwO1xuICBjb25zdCB0b3RhbFBhZ2VzID0gdG90YWxJdGVtcyA9PT0gMCA/IDAgOiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIHBhZ2VTaXplKTtcbiAgY29uc3Qgc2FmZVBhZ2UgPSB0b3RhbFBhZ2VzID09PSAwID8gMSA6IE1hdGgubWluKE1hdGgubWF4KE1hdGguZmxvb3IocmF3UGFnZSkgfHwgMSwgMSksIHRvdGFsUGFnZXMpO1xuICBjb25zdCBvZmZzZXQgPSAoc2FmZVBhZ2UgLSAxKSAqIHBhZ2VTaXplO1xuXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IG15c3FsUG9vbC5xdWVyeTxDbGllbnRSb3dbXT4oXG4gICAgYFNFTEVDVFxuICAgICAgdS5pZCxcbiAgICAgIHUudXNlcm5hbWUsXG4gICAgICB1LmlwX2FkZHJlc3MsXG4gICAgICB1LnR5cGUsXG4gICAgICB1LnN0YXR1cyxcbiAgICAgIHUucHJvZmlsZSxcbiAgICAgIHUuY29tbWVudCxcbiAgICAgIHUucm91dGVyX2lkLFxuICAgICAgdS5wcm9maWxlX2FzbGksXG4gICAgICAgci5uYW1lIEFTIHJvdXRlcl9uYW1lXG4gICAgRlJPTSB1c2VycyB1XG4gICAgTEVGVCBKT0lOIHJvdXRlcnMgciBPTiByLmlkID0gdS5yb3V0ZXJfaWRcbiAgICAke3doZXJlQ2xhdXNlfVxuICAgIE9SREVSIEJZIHUudXBkYXRlZF9hdCBERVNDLCB1LnVzZXJuYW1lIEFTQ1xuICAgIExJTUlUID9cbiAgICBPRkZTRVQgP2AsXG4gICAgWy4uLndoZXJlUGFyYW1zLCBwYWdlU2l6ZSwgb2Zmc2V0XSxcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGl0ZW1zOiByb3dzLFxuICAgIHBhZ2U6IHNhZmVQYWdlLFxuICAgIHBhZ2VTaXplLFxuICAgIHRvdGFsSXRlbXMsXG4gICAgdG90YWxQYWdlcyxcbiAgICBzZWFyY2g6IHNlYXJjaFRlcm0sXG4gICAgcm91dGVySWQsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDbGllbnRTdGF0dXMoaWQ6IG51bWJlciwgc3RhdHVzOiBcImFrdGlmXCIgfCBcIm5vbmFrdGlmXCIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PChSb3dEYXRhUGFja2V0ICYgeyB0eXBlOiBzdHJpbmcgfCBudWxsOyBwcm9maWxlOiBzdHJpbmcgfCBudWxsOyBwcm9maWxlX2FzbGk6IHN0cmluZyB8IG51bGwgfSlbXT4oXG4gICAgYFNFTEVDVCB0eXBlLCBwcm9maWxlLCBwcm9maWxlX2FzbGkgRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8gTElNSVQgMWAsXG4gICAgW2lkXSxcbiAgKTtcblxuICBpZiAoIXJvd3MubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IHRpZGFrIGRpdGVtdWthbi5cIik7XG4gIH1cblxuICBjb25zdCByb3cgPSByb3dzWzBdO1xuICBjb25zdCBjdXJyZW50UHJvZmlsZSA9IHJvdy5wcm9maWxlID8/IG51bGw7XG4gIGNvbnN0IHN0b3JlZE9yaWdpbmFsUHJvZmlsZSA9IHJvdy5wcm9maWxlX2FzbGk/LnRyaW0oKSA/IHJvdy5wcm9maWxlX2FzbGkgOiBudWxsO1xuICBjb25zdCB0eXBlID0gcm93LnR5cGU/LnRyaW0oKS50b0xvd2VyQ2FzZSgpID8/IG51bGw7XG5cbiAgaWYgKHN0YXR1cyA9PT0gXCJub25ha3RpZlwiKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxQcm9maWxlID0gc3RvcmVkT3JpZ2luYWxQcm9maWxlID8/IGN1cnJlbnRQcm9maWxlID8/IG51bGw7XG4gICAgYXdhaXQgbXlzcWxQb29sLnF1ZXJ5KFxuICAgICAgYFVQREFURSB1c2Vyc1xuICAgICAgIFNFVFxuICAgICAgICAgc3RhdHVzID0gJ25vbmFrdGlmJyxcbiAgICAgICAgIHByb2ZpbGVfYXNsaSA9IENPQUxFU0NFKE5VTExJRihwcm9maWxlX2FzbGksICcnKSwgPyksXG4gICAgICAgICBwcm9maWxlID0gJ2lzb2xpcicsXG4gICAgICAgICBtYW51YWxfb3ZlcnJpZGUgPSAxLFxuICAgICAgICAgdXBkYXRlZF9hdCA9IE5PVygpXG4gICAgICAgV0hFUkUgaWQgPSA/YCxcbiAgICAgIFtvcmlnaW5hbFByb2ZpbGUsIGlkXSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG5leHRQcm9maWxlID1cbiAgICAgIHR5cGUgPT09IFwicHBwb2VcIlxuICAgICAgICA/IHN0b3JlZE9yaWdpbmFsUHJvZmlsZSA/PyBcIm5vcm1hbFwiXG4gICAgICAgIDogXCJub3JtYWxcIjtcblxuICAgIGF3YWl0IG15c3FsUG9vbC5xdWVyeShcbiAgICAgIGBVUERBVEUgdXNlcnNcbiAgICAgICBTRVRcbiAgICAgICAgIHN0YXR1cyA9ICdha3RpZicsXG4gICAgICAgICBwcm9maWxlID0gPyxcbiAgICAgICAgIG1hbnVhbF9vdmVycmlkZSA9IDEsXG4gICAgICAgICB1cGRhdGVkX2F0ID0gTk9XKClcbiAgICAgICBXSEVSRSBpZCA9ID9gLFxuICAgICAgW25leHRQcm9maWxlLCBpZF0sXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBDcmVhdGVDbGllbnRQYXlsb2FkID0ge1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBpcEFkZHJlc3M/OiBzdHJpbmcgfCBudWxsO1xuICB0eXBlPzogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdHVzPzogXCJha3RpZlwiIHwgXCJub25ha3RpZlwiO1xuICBwcm9maWxlPzogc3RyaW5nIHwgbnVsbDtcbiAgY29tbWVudD86IHN0cmluZyB8IG51bGw7XG4gIHJvdXRlcklkPzogbnVtYmVyIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDbGllbnQocGF5bG9hZDogQ3JlYXRlQ2xpZW50UGF5bG9hZCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IHVzZXJuYW1lID0gcGF5bG9hZC51c2VybmFtZT8udHJpbSgpID8/IFwiXCI7XG4gIGlmICghdXNlcm5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VybmFtZSB3YWppYiBkaWlzaS5cIik7XG4gIH1cblxuICBjb25zdCBpcEFkZHJlc3MgPSBwYXlsb2FkLmlwQWRkcmVzcz8udHJpbSgpIHx8IG51bGw7XG4gIGNvbnN0IHJhd1R5cGUgPSBwYXlsb2FkLnR5cGU/LnRyaW0oKSB8fCBudWxsO1xuICBjb25zdCB0eXBlID0gcmF3VHlwZSA/IHJhd1R5cGUudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gIGNvbnN0IHN0YXR1czogXCJha3RpZlwiIHwgXCJub25ha3RpZlwiID0gcGF5bG9hZC5zdGF0dXMgPT09IFwibm9uYWt0aWZcIiA/IFwibm9uYWt0aWZcIiA6IFwiYWt0aWZcIjtcbiAgY29uc3QgY29tbWVudCA9IHBheWxvYWQuY29tbWVudD8udHJpbSgpIHx8IG51bGw7XG5cbiAgY29uc3QgbnVtZXJpY1JvdXRlcklkID1cbiAgICB0eXBlb2YgcGF5bG9hZC5yb3V0ZXJJZCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUocGF5bG9hZC5yb3V0ZXJJZCkgJiYgcGF5bG9hZC5yb3V0ZXJJZCA+IDBcbiAgICAgID8gTWF0aC5mbG9vcihwYXlsb2FkLnJvdXRlcklkKVxuICAgICAgOiBudWxsO1xuXG4gIGNvbnN0IGJhc2VQcm9maWxlID0gcGF5bG9hZC5wcm9maWxlPy50cmltKCkgfHwgKHR5cGUgPT09IFwicHBwb2VcIiA/IFwibm9ybWFsXCIgOiBudWxsKTtcbiAgY29uc3QgcHJvZmlsZSA9IHN0YXR1cyA9PT0gXCJub25ha3RpZlwiID8gXCJpc29saXJcIiA6IGJhc2VQcm9maWxlO1xuICBjb25zdCBwcm9maWxlQXNsaSA9IGJhc2VQcm9maWxlO1xuXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PG15c3FsLlJlc3VsdFNldEhlYWRlcj4oXG4gICAgYElOU0VSVCBJTlRPIHVzZXJzIChcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgaXBfYWRkcmVzcyxcbiAgICAgIHR5cGUsXG4gICAgICBzdGF0dXMsXG4gICAgICBwcm9maWxlLFxuICAgICAgcHJvZmlsZV9hc2xpLFxuICAgICAgY29tbWVudCxcbiAgICAgIHJvdXRlcl9pZCxcbiAgICAgIG1hbnVhbF9vdmVycmlkZSxcbiAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICB1cGRhdGVkX2F0XG4gICAgKVxuICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgMSwgTk9XKCksIE5PVygpKWAsXG4gICAgW3VzZXJuYW1lLCBpcEFkZHJlc3MsIHR5cGUsIHN0YXR1cywgcHJvZmlsZSwgcHJvZmlsZUFzbGksIGNvbW1lbnQsIG51bWVyaWNSb3V0ZXJJZF0sXG4gICk7XG5cbiAgcmV0dXJuIHJlc3VsdC5pbnNlcnRJZDtcbn1cblxuZXhwb3J0IHR5cGUgQ3JlYXRlQWt0aXZhc2lDbGllbnRQYXlsb2FkID0ge1xuICBuYW1hUGVsYW5nZ2FuOiBzdHJpbmc7XG4gIG5hbWFMYXlhbmFuOiBzdHJpbmc7XG4gIGthcGFzaXRhc0xheWFuYW46IHN0cmluZztcbiAgdmxhbklkOiBzdHJpbmc7XG4gIG5hbWFNZXRybzogc3RyaW5nO1xuICBzaXRlTWV0cm86IHN0cmluZztcbiAga2FwYXNpdGFzTWV0cm86IHN0cmluZztcbiAgaXBBZGRyZXNzOiBzdHJpbmc7XG4gIGlwR2F0ZXdheTogc3RyaW5nO1xuICByb3V0ZXJHYXRld2F5OiBzdHJpbmc7XG4gIGNyZWF0ZWRCeTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFrdGl2YXNpQ2xpZW50KHBheWxvYWQ6IENyZWF0ZUFrdGl2YXNpQ2xpZW50UGF5bG9hZCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PG15c3FsLlJlc3VsdFNldEhlYWRlcj4oXG4gICAgYElOU0VSVCBJTlRPIGFrdGl2YXNpX2NsaWVudHMgKFxuICAgICAgbmFtYV9wZWxhbmdnYW4sXG4gICAgICBuYW1hX2xheWFuYW4sXG4gICAgICBrYXBhc2l0YXNfbGF5YW5hbixcbiAgICAgIHZsYW5faWQsXG4gICAgICBuYW1hX21ldHJvLFxuICAgICAgc2l0ZV9tZXRybyxcbiAgICAgIGthcGFzaXRhc19tZXRybyxcbiAgICAgIGlwX2FkZHJlc3MsXG4gICAgICBpcF9nYXRld2F5LFxuICAgICAgcm91dGVyX2dhdGV3YXksXG4gICAgICBjcmVhdGVkX2J5LFxuICAgICAgY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXRcbiAgICApXG4gICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCBOT1coKSwgTk9XKCkpYCxcbiAgICBbXG4gICAgICBwYXlsb2FkLm5hbWFQZWxhbmdnYW4udHJpbSgpLFxuICAgICAgcGF5bG9hZC5uYW1hTGF5YW5hbi50cmltKCksXG4gICAgICBwYXlsb2FkLmthcGFzaXRhc0xheWFuYW4udHJpbSgpLFxuICAgICAgcGF5bG9hZC52bGFuSWQudHJpbSgpLFxuICAgICAgcGF5bG9hZC5uYW1hTWV0cm8udHJpbSgpLFxuICAgICAgcGF5bG9hZC5zaXRlTWV0cm8udHJpbSgpLFxuICAgICAgcGF5bG9hZC5rYXBhc2l0YXNNZXRyby50cmltKCksXG4gICAgICBwYXlsb2FkLmlwQWRkcmVzcy50cmltKCksXG4gICAgICBwYXlsb2FkLmlwR2F0ZXdheS50cmltKCksXG4gICAgICBwYXlsb2FkLnJvdXRlckdhdGV3YXkudHJpbSgpLFxuICAgICAgcGF5bG9hZC5jcmVhdGVkQnkudHJpbSgpLFxuICAgIF0sXG4gICk7XG5cbiAgcmV0dXJuIHJlc3VsdC5pbnNlcnRJZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNsaWVudChpZDogbnVtYmVyLCBwYXlsb2FkOiBVcGRhdGVDbGllbnRQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKGlkKSB8fCBpZCA8PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSUQgY2xpZW50IHRpZGFrIHZhbGlkLlwiKTtcbiAgfVxuXG4gIGNvbnN0IFtyb3dzXSA9IGF3YWl0IG15c3FsUG9vbC5xdWVyeTxcbiAgICBBcnJheTxcbiAgICAgIFJvd0RhdGFQYWNrZXQgJiB7XG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgICAgIGlwX2FkZHJlc3M6IHN0cmluZyB8IG51bGw7XG4gICAgICAgIHR5cGU6IHN0cmluZyB8IG51bGw7XG4gICAgICAgIHN0YXR1czogc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgcHJvZmlsZTogc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgcHJvZmlsZV9hc2xpOiBzdHJpbmcgfCBudWxsO1xuICAgICAgICBjb21tZW50OiBzdHJpbmcgfCBudWxsO1xuICAgICAgICByb3V0ZXJfaWQ6IG51bWJlciB8IG51bGw7XG4gICAgICB9XG4gICAgPlxuICA+KFxuICAgIGBTRUxFQ1QgdXNlcm5hbWUsIGlwX2FkZHJlc3MsIHR5cGUsIHN0YXR1cywgcHJvZmlsZSwgcHJvZmlsZV9hc2xpLCBjb21tZW50LCByb3V0ZXJfaWRcbiAgICAgRlJPTSB1c2Vyc1xuICAgICBXSEVSRSBpZCA9ID9cbiAgICAgTElNSVQgMWAsXG4gICAgW2lkXSxcbiAgKTtcblxuICBpZiAoIXJvd3MubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IHRpZGFrIGRpdGVtdWthbi5cIik7XG4gIH1cblxuICBjb25zdCBleGlzdGluZyA9IHJvd3NbMF07XG5cbiAgY29uc3QgdXNlcm5hbWVSYXcgPSBwYXlsb2FkLnVzZXJuYW1lICE9PSB1bmRlZmluZWQgPyBwYXlsb2FkLnVzZXJuYW1lIDogZXhpc3RpbmcudXNlcm5hbWU7XG4gIGNvbnN0IHVzZXJuYW1lID0gdXNlcm5hbWVSYXc/LnRyaW0oKTtcbiAgaWYgKCF1c2VybmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXJuYW1lIHdhamliIGRpaXNpLlwiKTtcbiAgfVxuXG4gIGNvbnN0IGlwUmF3ID0gcGF5bG9hZC5pcEFkZHJlc3MgIT09IHVuZGVmaW5lZCA/IHBheWxvYWQuaXBBZGRyZXNzIDogZXhpc3RpbmcuaXBfYWRkcmVzcztcbiAgY29uc3QgaXBBZGRyZXNzID0gaXBSYXcgPyBpcFJhdy50cmltKCkgOiBudWxsO1xuXG4gIGNvbnN0IHR5cGVSYXcgPSBwYXlsb2FkLnR5cGUgIT09IHVuZGVmaW5lZCA/IHBheWxvYWQudHlwZSA6IGV4aXN0aW5nLnR5cGU7XG4gIGNvbnN0IHR5cGUgPSB0eXBlUmF3ID8gdHlwZVJhdy50cmltKCkudG9Mb3dlckNhc2UoKSB8fCBudWxsIDogbnVsbDtcblxuICBjb25zdCBjb21tZW50UmF3ID0gcGF5bG9hZC5jb21tZW50ICE9PSB1bmRlZmluZWQgPyBwYXlsb2FkLmNvbW1lbnQgOiBleGlzdGluZy5jb21tZW50O1xuICBjb25zdCBjb21tZW50ID0gY29tbWVudFJhdyA/IGNvbW1lbnRSYXcudHJpbSgpIDogbnVsbDtcblxuICBjb25zdCByb3V0ZXJWYWx1ZSA9IHBheWxvYWQucm91dGVySWQgIT09IHVuZGVmaW5lZCA/IHBheWxvYWQucm91dGVySWQgOiBleGlzdGluZy5yb3V0ZXJfaWQ7XG4gIGNvbnN0IHJvdXRlcklkID1cbiAgICB0eXBlb2Ygcm91dGVyVmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHJvdXRlclZhbHVlKSAmJiByb3V0ZXJWYWx1ZSA+IDBcbiAgICAgID8gTWF0aC5mbG9vcihyb3V0ZXJWYWx1ZSlcbiAgICAgIDogbnVsbDtcblxuICBjb25zdCBzdGF0dXNJbnB1dCA9IHBheWxvYWQuc3RhdHVzID8/IChleGlzdGluZy5zdGF0dXMgPT09IFwibm9uYWt0aWZcIiA/IFwibm9uYWt0aWZcIiA6IFwiYWt0aWZcIik7XG4gIGNvbnN0IHN0YXR1czogXCJha3RpZlwiIHwgXCJub25ha3RpZlwiID0gc3RhdHVzSW5wdXQgPT09IFwibm9uYWt0aWZcIiA/IFwibm9uYWt0aWZcIiA6IFwiYWt0aWZcIjtcblxuICBjb25zdCBwcm9maWxlSW5wdXRSYXcgPSBwYXlsb2FkLnByb2ZpbGUgIT09IHVuZGVmaW5lZCA/IHBheWxvYWQucHJvZmlsZSA6IG51bGw7XG4gIGNvbnN0IHByb2ZpbGVJbnB1dCA9IHByb2ZpbGVJbnB1dFJhdyA/IHByb2ZpbGVJbnB1dFJhdy50cmltKCkgOiBudWxsO1xuXG4gIGNvbnN0IGV4aXN0aW5nUHJvZmlsZSA9IGV4aXN0aW5nLnByb2ZpbGU/LnRyaW0oKSB8fCBudWxsO1xuICBjb25zdCBleGlzdGluZ1Byb2ZpbGVBc2xpID0gZXhpc3RpbmcucHJvZmlsZV9hc2xpPy50cmltKCkgfHwgbnVsbDtcblxuICBsZXQgcHJvZmlsZTogc3RyaW5nIHwgbnVsbCA9IGV4aXN0aW5nUHJvZmlsZTtcbiAgbGV0IHByb2ZpbGVBc2xpOiBzdHJpbmcgfCBudWxsID0gZXhpc3RpbmdQcm9maWxlQXNsaTtcblxuICBpZiAoc3RhdHVzID09PSBcIm5vbmFrdGlmXCIpIHtcbiAgICBjb25zdCBvcmlnaW5hbFByb2ZpbGUgPVxuICAgICAgcHJvZmlsZUlucHV0ID8/XG4gICAgICBwcm9maWxlQXNsaSA/P1xuICAgICAgZXhpc3RpbmdQcm9maWxlID8/XG4gICAgICAodHlwZSA9PT0gXCJwcHBvZVwiID8gXCJub3JtYWxcIiA6IG51bGwpO1xuICAgIHByb2ZpbGVBc2xpID0gb3JpZ2luYWxQcm9maWxlO1xuICAgIHByb2ZpbGUgPSBcImlzb2xpclwiO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGJhc2VQcm9maWxlID1cbiAgICAgIHByb2ZpbGVJbnB1dCA/P1xuICAgICAgcHJvZmlsZUFzbGkgPz9cbiAgICAgIChleGlzdGluZ1Byb2ZpbGUgIT09IFwiaXNvbGlyXCIgPyBleGlzdGluZ1Byb2ZpbGUgOiBudWxsKSA/P1xuICAgICAgKHR5cGUgPT09IFwicHBwb2VcIiA/IFwibm9ybWFsXCIgOiBudWxsKTtcbiAgICBwcm9maWxlQXNsaSA9IGJhc2VQcm9maWxlO1xuICAgIHByb2ZpbGUgPSBiYXNlUHJvZmlsZTtcbiAgfVxuXG4gIGF3YWl0IG15c3FsUG9vbC5xdWVyeShcbiAgICBgVVBEQVRFIHVzZXJzXG4gICAgIFNFVFxuICAgICAgIHVzZXJuYW1lID0gPyxcbiAgICAgICBpcF9hZGRyZXNzID0gPyxcbiAgICAgICB0eXBlID0gPyxcbiAgICAgICBzdGF0dXMgPSA/LFxuICAgICAgIHByb2ZpbGUgPSA/LFxuICAgICAgIHByb2ZpbGVfYXNsaSA9ID8sXG4gICAgICAgY29tbWVudCA9ID8sXG4gICAgICAgcm91dGVyX2lkID0gPyxcbiAgICAgICBtYW51YWxfb3ZlcnJpZGUgPSAxLFxuICAgICAgIHVwZGF0ZWRfYXQgPSBOT1coKVxuICAgICBXSEVSRSBpZCA9ID9gLFxuICAgIFt1c2VybmFtZSwgaXBBZGRyZXNzLCB0eXBlLCBzdGF0dXMsIHByb2ZpbGUsIHByb2ZpbGVBc2xpLCBjb21tZW50LCByb3V0ZXJJZCwgaWRdLFxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ2xpZW50KGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaWQpIHx8IGlkIDw9IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJRCBjbGllbnQgdGlkYWsgdmFsaWQuXCIpO1xuICB9XG5cbiAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBteXNxbFBvb2wucXVlcnk8bXlzcWwuUmVzdWx0U2V0SGVhZGVyPihcIkRFTEVURSBGUk9NIHVzZXJzIFdIRVJFIGlkID0gP1wiLCBbaWRdKTtcbiAgaWYgKHJlc3VsdC5hZmZlY3RlZFJvd3MgPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgdGlkYWsgZGl0ZW11a2FuLlwiKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHRpbWluZ1NhZmVDb21wYXJlKGE6IHN0cmluZywgYjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGJ1ZkEgPSBCdWZmZXIuZnJvbShhIHx8IFwiXCIpXG4gIGNvbnN0IGJ1ZkIgPSBCdWZmZXIuZnJvbShiIHx8IFwiXCIpXG4gIGlmIChidWZBLmxlbmd0aCA9PT0gYnVmQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gY3J5cHRvLnRpbWluZ1NhZmVFcXVhbChidWZBLCBidWZCKVxuICB9XG4gIGNvbnN0IGxlbiA9IE1hdGgubWF4KGJ1ZkEubGVuZ3RoLCBidWZCLmxlbmd0aClcbiAgY29uc3QgcGFkZGVkQSA9IEJ1ZmZlci5hbGxvYyhsZW4pXG4gIGNvbnN0IHBhZGRlZEIgPSBCdWZmZXIuYWxsb2MobGVuKVxuICBidWZBLmNvcHkocGFkZGVkQSlcbiAgYnVmQi5jb3B5KHBhZGRlZEIpXG4gIHJldHVybiBjcnlwdG8udGltaW5nU2FmZUVxdWFsKHBhZGRlZEEsIHBhZGRlZEIpICYmIGEgPT09IGJcbn1cblxuZnVuY3Rpb24gaGFzaFdpdGhBbGdvcml0aG0oYWxnb3JpdGhtOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goYWxnb3JpdGhtKS51cGRhdGUodmFsdWUpLmRpZ2VzdChcImhleFwiKVxufVxuXG5leHBvcnQgdHlwZSBSb3V0ZXJSb3cgPSBSb3dEYXRhUGFja2V0ICYge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hSb3V0ZXJzKCk6IFByb21pc2U8Um91dGVyUm93W10+IHtcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PFJvdXRlclJvd1tdPihcbiAgICBcIlNFTEVDVCBpZCwgbmFtZSBGUk9NIHJvdXRlcnMgT1JERVIgQlkgbmFtZSBBU0NcIixcbiAgKTtcbiAgcmV0dXJuIHJvd3M7XG59XG5cbnR5cGUgQWNjZXNzUG9pbnRQYXlsb2FkID0ge1xuICBzc2lkOiBzdHJpbmc7XG4gIGJ0c05hbWU6IHN0cmluZztcbiAgaXBBZGRyZXNzOiBzdHJpbmcgfCBudWxsO1xuICBkZXZpY2U6IHN0cmluZyB8IG51bGw7XG4gIHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBwYXNzd29yZDogc3RyaW5nIHwgbnVsbDtcbiAgc2VjdXJpdHk6IHN0cmluZyB8IG51bGw7XG4gIHBocmFzZUtleTogc3RyaW5nIHwgbnVsbDtcbiAgZnJlcXVlbmN5OiBzdHJpbmcgfCBudWxsO1xuICBjaGFubmVsV2lkdGg6IHN0cmluZyB8IG51bGw7XG4gIG1hY0FkZHJlc3M6IHN0cmluZyB8IG51bGw7XG4gIHJvdXRlcklkOiBudW1iZXIgfCBudWxsO1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFjY2Vzc1BvaW50KHBheWxvYWQ6IEFjY2Vzc1BvaW50UGF5bG9hZCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgbXlzcWxQb29sLnF1ZXJ5PG15c3FsLlJlc3VsdFNldEhlYWRlcj4oXG4gICAgYElOU0VSVCBJTlRPIGFjY2Vzc19wb2ludHMgKFxuICAgICAgc3NpZCxcbiAgICAgIGJ0c19uYW1lLFxuICAgICAgaXBfYWRkcmVzcyxcbiAgICAgIGRldmljZSxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBzZWN1cml0eSxcbiAgICAgIHBocmFzZV9rZXksXG4gICAgICBmcmVxdWVuY3ksXG4gICAgICBjaGFubmVsX3dpZHRoLFxuICAgICAgbWFjX2FkZHJlc3MsXG4gICAgICByb3V0ZXJfaWQsXG4gICAgICBjcmVhdGVkX2F0XG4gICAgKVxuICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgTk9XKCkpYCxcbiAgICBbXG4gICAgICBwYXlsb2FkLnNzaWQsXG4gICAgICBwYXlsb2FkLmJ0c05hbWUsXG4gICAgICBwYXlsb2FkLmlwQWRkcmVzcyxcbiAgICAgIHBheWxvYWQuZGV2aWNlLFxuICAgICAgcGF5bG9hZC51c2VybmFtZSxcbiAgICAgIHBheWxvYWQucGFzc3dvcmQsXG4gICAgICBwYXlsb2FkLnNlY3VyaXR5LFxuICAgICAgcGF5bG9hZC5waHJhc2VLZXksXG4gICAgICBwYXlsb2FkLmZyZXF1ZW5jeSxcbiAgICAgIHBheWxvYWQuY2hhbm5lbFdpZHRoLFxuICAgICAgcGF5bG9hZC5tYWNBZGRyZXNzLFxuICAgICAgcGF5bG9hZC5yb3V0ZXJJZCxcbiAgICBdLFxuICApXG5cbiAgcmV0dXJuIHJlc3VsdC5pbnNlcnRJZFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjZXNzUG9pbnQoaWQ6IG51bWJlciwgcGF5bG9hZDogQWNjZXNzUG9pbnRQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IG15c3FsUG9vbC5xdWVyeShcbiAgICBgVVBEQVRFIGFjY2Vzc19wb2ludHNcbiAgICAgU0VUIHNzaWQgPSA/LCBidHNfbmFtZSA9ID8sIGlwX2FkZHJlc3MgPSA/LCBkZXZpY2UgPSA/LCB1c2VybmFtZSA9ID8sIHBhc3N3b3JkID0gPywgc2VjdXJpdHkgPSA/LCBwaHJhc2Vfa2V5ID0gPywgZnJlcXVlbmN5ID0gPywgY2hhbm5lbF93aWR0aCA9ID8sIG1hY19hZGRyZXNzID0gPywgcm91dGVyX2lkID0gP1xuICAgICBXSEVSRSBpZCA9ID9gLFxuICAgIFtcbiAgICAgIHBheWxvYWQuc3NpZCxcbiAgICAgIHBheWxvYWQuYnRzTmFtZSxcbiAgICAgIHBheWxvYWQuaXBBZGRyZXNzLFxuICAgICAgcGF5bG9hZC5kZXZpY2UsXG4gICAgICBwYXlsb2FkLnVzZXJuYW1lLFxuICAgICAgcGF5bG9hZC5wYXNzd29yZCxcbiAgICAgIHBheWxvYWQuc2VjdXJpdHksXG4gICAgICBwYXlsb2FkLnBocmFzZUtleSxcbiAgICAgIHBheWxvYWQuZnJlcXVlbmN5LFxuICAgICAgcGF5bG9hZC5jaGFubmVsV2lkdGgsXG4gICAgICBwYXlsb2FkLm1hY0FkZHJlc3MsXG4gICAgICBwYXlsb2FkLnJvdXRlcklkLFxuICAgICAgaWQsXG4gICAgXSxcbiAgKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjZXNzUG9pbnQoaWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBteXNxbFBvb2wucXVlcnkoXCJERUxFVEUgRlJPTSBhY2Nlc3NfcG9pbnRzIFdIRVJFIGlkID0gP1wiLCBbaWRdKVxufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsIm15c3FsIiwiY29uZmlnIiwiaG9zdCIsImRhdGFiYXNlIiwidXNlciIsInBhc3N3b3JkIiwiY2hhcnNldCIsIndhaXRGb3JDb25uZWN0aW9ucyIsImNvbm5lY3Rpb25MaW1pdCIsIm5hbWVkUGxhY2Vob2xkZXJzIiwiZ2xvYmFsRm9yUG9vbCIsImdsb2JhbFRoaXMiLCJteXNxbFBvb2wiLCJfX215c3FsUG9vbCIsImNyZWF0ZVBvb2wiLCJkZWNpbWFsTnVtYmVycyIsImZldGNoQWNjZXNzUG9pbnRzIiwicm93cyIsInF1ZXJ5IiwiV0lCX1RJTUVaT05FIiwiT05FX0RBWV9NUyIsImZvcm1hdERhdGVUb015U1FMIiwidGltZXpvbmUiLCJkYXRlIiwiRGF0ZSIsImZvcm1hdHRlciIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsInRpbWVab25lIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsImhvdXIxMiIsInBhcnRzIiwiZm9ybWF0VG9QYXJ0cyIsInJlZHVjZSIsImFjYyIsInBhcnQiLCJ0eXBlIiwidmFsdWUiLCJwYWRTdGFydCIsImZldGNoUGVuZGluZ0l0ZW1zIiwibm93IiwidGhyZXNob2xkRGF0ZSIsImdldFRpbWUiLCJ0aHJlc2hvbGQiLCJjcmVhdGVQZW5kaW5nSXRlbSIsInBheWxvYWQiLCJjcmVhdGVkQXQiLCJyZXN1bHQiLCJjdXN0b21lck5hbWUiLCJkZXNjcmlwdGlvbiIsImFkZHJlc3MiLCJrYWJ1cGF0ZW4iLCJpbnNlcnRJZCIsImRlbGV0ZVBlbmRpbmdJdGVtIiwiaWQiLCJ2ZXJpZnlBZG1pbkNyZWRlbnRpYWxzIiwidXNlcm5hbWUiLCJsZW5ndGgiLCJzdG9yZWQiLCJjYW5kaWRhdGVzIiwidGVzdCIsInB1c2giLCJoYXNoV2l0aEFsZ29yaXRobSIsImlzTWF0Y2giLCJzb21lIiwiY2FuZGlkYXRlIiwidGltaW5nU2FmZUNvbXBhcmUiLCJERUZBVUxUX0NMSUVOVF9QQUdFX1NJWkUiLCJNQVhfQ0xJRU5UX1BBR0VfU0laRSIsImZldGNoQ2xpZW50cyIsIm9wdGlvbnMiLCJyYXdQYWdlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJwYWdlIiwicmF3UGFnZVNpemUiLCJwYWdlU2l6ZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJmbG9vciIsInNlYXJjaFRlcm0iLCJzZWFyY2giLCJ0cmltIiwicmF3Um91dGVySWQiLCJyb3V0ZXJJZCIsImxpa2VUZXJtIiwicmVwbGFjZSIsInNlYXJjaFBhcmFtcyIsIndoZXJlUGFydHMiLCJ3aGVyZVBhcmFtcyIsIndoZXJlQ2xhdXNlIiwiam9pbiIsImNvdW50Um93cyIsInRvdGFsSXRlbXMiLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJjZWlsIiwic2FmZVBhZ2UiLCJvZmZzZXQiLCJpdGVtcyIsInVwZGF0ZUNsaWVudFN0YXR1cyIsInN0YXR1cyIsIkVycm9yIiwicm93IiwiY3VycmVudFByb2ZpbGUiLCJwcm9maWxlIiwic3RvcmVkT3JpZ2luYWxQcm9maWxlIiwicHJvZmlsZV9hc2xpIiwidG9Mb3dlckNhc2UiLCJvcmlnaW5hbFByb2ZpbGUiLCJuZXh0UHJvZmlsZSIsImNyZWF0ZUNsaWVudCIsImlwQWRkcmVzcyIsInJhd1R5cGUiLCJjb21tZW50IiwibnVtZXJpY1JvdXRlcklkIiwiYmFzZVByb2ZpbGUiLCJwcm9maWxlQXNsaSIsImNyZWF0ZUFrdGl2YXNpQ2xpZW50IiwibmFtYVBlbGFuZ2dhbiIsIm5hbWFMYXlhbmFuIiwia2FwYXNpdGFzTGF5YW5hbiIsInZsYW5JZCIsIm5hbWFNZXRybyIsInNpdGVNZXRybyIsImthcGFzaXRhc01ldHJvIiwiaXBHYXRld2F5Iiwicm91dGVyR2F0ZXdheSIsImNyZWF0ZWRCeSIsInVwZGF0ZUNsaWVudCIsImV4aXN0aW5nIiwidXNlcm5hbWVSYXciLCJ1bmRlZmluZWQiLCJpcFJhdyIsImlwX2FkZHJlc3MiLCJ0eXBlUmF3IiwiY29tbWVudFJhdyIsInJvdXRlclZhbHVlIiwicm91dGVyX2lkIiwic3RhdHVzSW5wdXQiLCJwcm9maWxlSW5wdXRSYXciLCJwcm9maWxlSW5wdXQiLCJleGlzdGluZ1Byb2ZpbGUiLCJleGlzdGluZ1Byb2ZpbGVBc2xpIiwiZGVsZXRlQ2xpZW50IiwiYWZmZWN0ZWRSb3dzIiwiYSIsImIiLCJidWZBIiwiQnVmZmVyIiwiZnJvbSIsImJ1ZkIiLCJ0aW1pbmdTYWZlRXF1YWwiLCJsZW4iLCJwYWRkZWRBIiwiYWxsb2MiLCJwYWRkZWRCIiwiY29weSIsImFsZ29yaXRobSIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJmZXRjaFJvdXRlcnMiLCJjcmVhdGVBY2Nlc3NQb2ludCIsInNzaWQiLCJidHNOYW1lIiwiZGV2aWNlIiwic2VjdXJpdHkiLCJwaHJhc2VLZXkiLCJmcmVxdWVuY3kiLCJjaGFubmVsV2lkdGgiLCJtYWNBZGRyZXNzIiwidXBkYXRlQWNjZXNzUG9pbnQiLCJkZWxldGVBY2Nlc3NQb2ludCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();