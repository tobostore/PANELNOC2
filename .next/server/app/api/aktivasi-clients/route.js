"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/aktivasi-clients/route";
exports.ids = ["app/api/aktivasi-clients/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faktivasi-clients%2Froute&page=%2Fapi%2Faktivasi-clients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faktivasi-clients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faktivasi-clients%2Froute&page=%2Fapi%2Faktivasi-clients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faktivasi-clients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _root_isolir4_app_api_aktivasi_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/aktivasi-clients/route.ts */ \"(rsc)/./app/api/aktivasi-clients/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/aktivasi-clients/route\",\n        pathname: \"/api/aktivasi-clients\",\n        filename: \"route\",\n        bundlePath: \"app/api/aktivasi-clients/route\"\n    },\n    resolvedPagePath: \"/root/isolir4/app/api/aktivasi-clients/route.ts\",\n    nextConfigOutput,\n    userland: _root_isolir4_app_api_aktivasi_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/aktivasi-clients/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZha3RpdmFzaS1jbGllbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZha3RpdmFzaS1jbGllbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWt0aXZhc2ktY2xpZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZyb290JTJGaXNvbGlyNCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGcm9vdCUyRmlzb2xpcjQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYW5lbC1ub2MvPzFjODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL3Jvb3QvaXNvbGlyNC9hcHAvYXBpL2FrdGl2YXNpLWNsaWVudHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FrdGl2YXNpLWNsaWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ha3RpdmFzaS1jbGllbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ha3RpdmFzaS1jbGllbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL3Jvb3QvaXNvbGlyNC9hcHAvYXBpL2FrdGl2YXNpLWNsaWVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FrdGl2YXNpLWNsaWVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faktivasi-clients%2Froute&page=%2Fapi%2Faktivasi-clients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faktivasi-clients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/aktivasi-clients/route.ts":
/*!*******************************************!*\
  !*** ./app/api/aktivasi-clients/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\nconst REMOTE_AKTIVASI_CLIENT_API = \"http://10.20.25.8:8000/api/v1/aktivasi-clients\";\nconst REQUIRED_FIELDS = [\n    \"nama_pelanggan\",\n    \"nama_layanan\",\n    \"kapasitas_layanan\",\n    \"vlan_id\",\n    \"nama_metro\",\n    \"site_metro\",\n    \"kapasitas_metro\",\n    \"ip_address\",\n    \"ip_gateway\",\n    \"router_gateway\"\n];\nfunction normalizeItem(item) {\n    if (!item || typeof item !== \"object\") {\n        return null;\n    }\n    const record = item;\n    const idRaw = record.id ?? record.ID ?? record.Id;\n    const id = typeof idRaw === \"number\" ? idRaw : Number(idRaw);\n    const get = (key)=>typeof record[key] === \"string\" ? record[key].trim() : null;\n    return {\n        id: Number.isFinite(id) ? Number(id) : null,\n        namaPelanggan: get(\"nama_pelanggan\") ?? \"-\",\n        namaLayanan: get(\"nama_layanan\") ?? \"-\",\n        kapasitasLayanan: get(\"kapasitas_layanan\") ?? \"-\",\n        vlanId: get(\"vlan_id\") ?? \"-\",\n        namaMetro: get(\"nama_metro\") ?? \"-\",\n        siteMetro: get(\"site_metro\") ?? \"-\",\n        kapasitasMetro: get(\"kapasitas_metro\") ?? \"-\",\n        ipAddress: get(\"ip_address\") ?? \"-\",\n        ipGateway: get(\"ip_gateway\") ?? \"-\",\n        routerGateway: get(\"router_gateway\") ?? \"-\",\n        createdBy: get(\"created_by\"),\n        createdAt: get(\"created_at\"),\n        updatedAt: get(\"updated_at\")\n    };\n}\nfunction toApiResponse(items) {\n    return {\n        status: \"ok\",\n        items\n    };\n}\nfunction sanitize(body) {\n    const result = {};\n    for (const field of REQUIRED_FIELDS){\n        const value = body[field];\n        if (typeof value !== \"string\" || !value.trim()) {\n            throw new Error(`Field ${field} wajib diisi.`);\n        }\n        result[field] = value.trim();\n    }\n    return result;\n}\nasync function GET() {\n    try {\n        const response = await fetch(REMOTE_AKTIVASI_CLIENT_API, {\n            cache: \"no-store\"\n        });\n        if (!response.ok) {\n            throw new Error(`API mengembalikan status ${response.status}`);\n        }\n        const payload = await response.json();\n        const dataArray = Array.isArray(payload) ? payload : Array.isArray(payload.data) ? payload.data : [];\n        const items = dataArray.map((item)=>normalizeItem(item)).filter((item)=>item !== null);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json(toApiResponse(items), {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"[api/aktivasi-clients] failed to fetch data\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            status: \"error\",\n            message: \"Gagal mengambil data aktivasi reseller.\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const payload = sanitize(body);\n        const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.AUTH_COOKIE_NAME)?.value ?? null;\n        const auth = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuthToken)(token);\n        if (!auth) {\n            throw new Error(\"Anda belum login.\");\n        }\n        const requestPayload = {\n            ...payload,\n            created_by: auth.username\n        };\n        const response = await fetch(REMOTE_AKTIVASI_CLIENT_API, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(requestPayload)\n        });\n        if (!response.ok) {\n            const errorPayload = await response.json().catch(()=>null);\n            const message = typeof errorPayload?.message === \"string\" && errorPayload.message.trim().length > 0 ? errorPayload.message : `API mengembalikan status ${response.status}`;\n            throw new Error(message);\n        }\n        const result = await response.json().catch(()=>({\n                status: \"ok\"\n            }));\n        const refreshed = await fetch(REMOTE_AKTIVASI_CLIENT_API, {\n            cache: \"no-store\"\n        });\n        const refreshedPayload = await refreshed.json().catch(()=>({\n                data: []\n            }));\n        const refreshedArray = Array.isArray(refreshedPayload) ? refreshedPayload : Array.isArray(refreshedPayload.data) ? refreshedPayload.data : [];\n        const items = refreshedArray.map((item)=>normalizeItem(item)).filter((item)=>item !== null);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            ...toApiResponse(items),\n            message: result?.message ?? \"Aktivasi reseller berhasil disimpan.\"\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"[api/aktivasi-clients] failed to create\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"Gagal menyimpan data aktivasi reseller.\"\n        }, {\n            status: 400\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxJQUFPO2dCQUFFbEIsTUFBTSxFQUFFO1lBQUM7UUFDekUsTUFBTXNCLGlCQUFpQnhCLE1BQU1DLE9BQU8sQ0FBQ3NCLG9CQUNqQ0EsbUJBQ0F2QixNQUFNQyxPQUFPLENBQUMsaUJBQThDQyxJQUFJLElBQzlELGlCQUE4Q0EsSUFBSSxHQUNsRCxFQUFFO1FBQ1IsTUFBTWxCLFFBQVF3QyxlQUNYckIsR0FBRyxDQUFDLENBQUM1QyxPQUFTRCxjQUFjQyxPQUM1QjZDLE1BQU0sQ0FBQyxDQUFDN0MsT0FBcUNBLFNBQVM7UUFFekQsT0FBT04scURBQVlBLENBQUM2QyxJQUFJLENBQ3RCO1lBQ0UsR0FBR2YsY0FBY0MsTUFBTTtZQUN2QnVCLFNBQVNuQixRQUFRbUIsV0FBVztRQUM5QixHQUNBO1lBQUV0QixRQUFRO1FBQUk7SUFFbEIsRUFBRSxPQUFPb0IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkNBQTJDQTtRQUN6RCxPQUFPcEQscURBQVlBLENBQUM2QyxJQUFJLENBQ3RCO1lBQ0ViLFFBQVE7WUFDUnNCLFNBQVNGLGlCQUFpQmQsUUFBUWMsTUFBTUUsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRXRCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFuZWwtbm9jLy4vYXBwL2FwaS9ha3RpdmFzaS1jbGllbnRzL3JvdXRlLnRzP2VmYzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIlxuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcblxuaW1wb3J0IHsgQVVUSF9DT09LSUVfTkFNRSwgdmVyaWZ5QXV0aFRva2VuIH0gZnJvbSBcIkAvbGliL2F1dGhcIlxuXG5jb25zdCBSRU1PVEVfQUtUSVZBU0lfQ0xJRU5UX0FQSSA9IFwiaHR0cDovLzEwLjIwLjI1Ljg6ODAwMC9hcGkvdjEvYWt0aXZhc2ktY2xpZW50c1wiXG5cbmNvbnN0IFJFUVVJUkVEX0ZJRUxEUyA9IFtcbiAgXCJuYW1hX3BlbGFuZ2dhblwiLFxuICBcIm5hbWFfbGF5YW5hblwiLFxuICBcImthcGFzaXRhc19sYXlhbmFuXCIsXG4gIFwidmxhbl9pZFwiLFxuICBcIm5hbWFfbWV0cm9cIixcbiAgXCJzaXRlX21ldHJvXCIsXG4gIFwia2FwYXNpdGFzX21ldHJvXCIsXG4gIFwiaXBfYWRkcmVzc1wiLFxuICBcImlwX2dhdGV3YXlcIixcbiAgXCJyb3V0ZXJfZ2F0ZXdheVwiLFxuXSBhcyBjb25zdFxuXG50eXBlIFJlbW90ZUFrdGl2YXNpUGF5bG9hZCA9IFJlY29yZDwodHlwZW9mIFJFUVVJUkVEX0ZJRUxEUylbbnVtYmVyXSwgdW5rbm93bj5cblxudHlwZSBBa3RpdmFzaUNsaWVudEl0ZW0gPSB7XG4gIGlkOiBudW1iZXIgfCBudWxsXG4gIG5hbWFQZWxhbmdnYW46IHN0cmluZ1xuICBuYW1hTGF5YW5hbjogc3RyaW5nXG4gIGthcGFzaXRhc0xheWFuYW46IHN0cmluZ1xuICB2bGFuSWQ6IHN0cmluZ1xuICBuYW1hTWV0cm86IHN0cmluZ1xuICBzaXRlTWV0cm86IHN0cmluZ1xuICBrYXBhc2l0YXNNZXRybzogc3RyaW5nXG4gIGlwQWRkcmVzczogc3RyaW5nXG4gIGlwR2F0ZXdheTogc3RyaW5nXG4gIHJvdXRlckdhdGV3YXk6IHN0cmluZ1xuICBjcmVhdGVkQnk6IHN0cmluZyB8IG51bGxcbiAgY3JlYXRlZEF0OiBzdHJpbmcgfCBudWxsXG4gIHVwZGF0ZWRBdDogc3RyaW5nIHwgbnVsbFxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVJdGVtKGl0ZW06IHVua25vd24pOiBBa3RpdmFzaUNsaWVudEl0ZW0gfCBudWxsIHtcbiAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCByZWNvcmQgPSBpdGVtIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIGNvbnN0IGlkUmF3ID0gcmVjb3JkLmlkID8/IHJlY29yZC5JRCA/PyByZWNvcmQuSWRcbiAgY29uc3QgaWQgPSB0eXBlb2YgaWRSYXcgPT09IFwibnVtYmVyXCIgPyBpZFJhdyA6IE51bWJlcihpZFJhdylcblxuICBjb25zdCBnZXQgPSAoa2V5OiBzdHJpbmcpID0+ICh0eXBlb2YgcmVjb3JkW2tleV0gPT09IFwic3RyaW5nXCIgPyAocmVjb3JkW2tleV0gYXMgc3RyaW5nKS50cmltKCkgOiBudWxsKVxuXG4gIHJldHVybiB7XG4gICAgaWQ6IE51bWJlci5pc0Zpbml0ZShpZCkgPyBOdW1iZXIoaWQpIDogbnVsbCxcbiAgICBuYW1hUGVsYW5nZ2FuOiBnZXQoXCJuYW1hX3BlbGFuZ2dhblwiKSA/PyBcIi1cIixcbiAgICBuYW1hTGF5YW5hbjogZ2V0KFwibmFtYV9sYXlhbmFuXCIpID8/IFwiLVwiLFxuICAgIGthcGFzaXRhc0xheWFuYW46IGdldChcImthcGFzaXRhc19sYXlhbmFuXCIpID8/IFwiLVwiLFxuICAgIHZsYW5JZDogZ2V0KFwidmxhbl9pZFwiKSA/PyBcIi1cIixcbiAgICBuYW1hTWV0cm86IGdldChcIm5hbWFfbWV0cm9cIikgPz8gXCItXCIsXG4gICAgc2l0ZU1ldHJvOiBnZXQoXCJzaXRlX21ldHJvXCIpID8/IFwiLVwiLFxuICAgIGthcGFzaXRhc01ldHJvOiBnZXQoXCJrYXBhc2l0YXNfbWV0cm9cIikgPz8gXCItXCIsXG4gICAgaXBBZGRyZXNzOiBnZXQoXCJpcF9hZGRyZXNzXCIpID8/IFwiLVwiLFxuICAgIGlwR2F0ZXdheTogZ2V0KFwiaXBfZ2F0ZXdheVwiKSA/PyBcIi1cIixcbiAgICByb3V0ZXJHYXRld2F5OiBnZXQoXCJyb3V0ZXJfZ2F0ZXdheVwiKSA/PyBcIi1cIixcbiAgICBjcmVhdGVkQnk6IGdldChcImNyZWF0ZWRfYnlcIiksXG4gICAgY3JlYXRlZEF0OiBnZXQoXCJjcmVhdGVkX2F0XCIpLFxuICAgIHVwZGF0ZWRBdDogZ2V0KFwidXBkYXRlZF9hdFwiKSxcbiAgfVxufVxuXG5mdW5jdGlvbiB0b0FwaVJlc3BvbnNlKGl0ZW1zOiBBa3RpdmFzaUNsaWVudEl0ZW1bXSkge1xuICByZXR1cm4ge1xuICAgIHN0YXR1czogXCJva1wiLFxuICAgIGl0ZW1zLFxuICB9XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplKGJvZHk6IFBhcnRpYWw8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+KTogUmVtb3RlQWt0aXZhc2lQYXlsb2FkIHtcbiAgY29uc3QgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgZm9yIChjb25zdCBmaWVsZCBvZiBSRVFVSVJFRF9GSUVMRFMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGJvZHlbZmllbGRdXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIiB8fCAhdmFsdWUudHJpbSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpZWxkICR7ZmllbGR9IHdhamliIGRpaXNpLmApXG4gICAgfVxuICAgIHJlc3VsdFtmaWVsZF0gPSB2YWx1ZS50cmltKClcbiAgfVxuICByZXR1cm4gcmVzdWx0IGFzIFJlbW90ZUFrdGl2YXNpUGF5bG9hZFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goUkVNT1RFX0FLVElWQVNJX0NMSUVOVF9BUEksIHsgY2FjaGU6IFwibm8tc3RvcmVcIiB9KVxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIG1lbmdlbWJhbGlrYW4gc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIHVua25vd25cbiAgICBjb25zdCBkYXRhQXJyYXkgPSBBcnJheS5pc0FycmF5KHBheWxvYWQpXG4gICAgICA/IHBheWxvYWRcbiAgICAgIDogQXJyYXkuaXNBcnJheSgocGF5bG9hZCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikuZGF0YSlcbiAgICAgICAgPyAocGF5bG9hZCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikuZGF0YVxuICAgICAgICA6IFtdXG5cbiAgICBjb25zdCBpdGVtcyA9IGRhdGFBcnJheVxuICAgICAgLm1hcCgoaXRlbSkgPT4gbm9ybWFsaXplSXRlbShpdGVtKSlcbiAgICAgIC5maWx0ZXIoKGl0ZW0pOiBpdGVtIGlzIEFrdGl2YXNpQ2xpZW50SXRlbSA9PiBpdGVtICE9PSBudWxsKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHRvQXBpUmVzcG9uc2UoaXRlbXMpLCB7IHN0YXR1czogMjAwIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlthcGkvYWt0aXZhc2ktY2xpZW50c10gZmFpbGVkIHRvIGZldGNoIGRhdGFcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJHYWdhbCBtZW5nYW1iaWwgZGF0YSBha3RpdmFzaSByZXNlbGxlci5cIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gKGF3YWl0IHJlcXVlc3QuanNvbigpKSBhcyBQYXJ0aWFsPFJlY29yZDxzdHJpbmcsIHVua25vd24+PlxuICAgIGNvbnN0IHBheWxvYWQgPSBzYW5pdGl6ZShib2R5KVxuXG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVzKCkuZ2V0KEFVVEhfQ09PS0lFX05BTUUpPy52YWx1ZSA/PyBudWxsXG4gICAgY29uc3QgYXV0aCA9IHZlcmlmeUF1dGhUb2tlbih0b2tlbilcbiAgICBpZiAoIWF1dGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFuZGEgYmVsdW0gbG9naW4uXCIpXG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdFBheWxvYWQgPSB7XG4gICAgICAuLi5wYXlsb2FkLFxuICAgICAgY3JlYXRlZF9ieTogYXV0aC51c2VybmFtZSxcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFJFTU9URV9BS1RJVkFTSV9DTElFTlRfQVBJLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdFBheWxvYWQpLFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclBheWxvYWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gbnVsbClcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICB0eXBlb2YgZXJyb3JQYXlsb2FkPy5tZXNzYWdlID09PSBcInN0cmluZ1wiICYmIGVycm9yUGF5bG9hZC5tZXNzYWdlLnRyaW0oKS5sZW5ndGggPiAwXG4gICAgICAgICAgPyBlcnJvclBheWxvYWQubWVzc2FnZVxuICAgICAgICAgIDogYEFQSSBtZW5nZW1iYWxpa2FuIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSlcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHsgc3RhdHVzOiBcIm9rXCIgfSkpXG5cbiAgICBjb25zdCByZWZyZXNoZWQgPSBhd2FpdCBmZXRjaChSRU1PVEVfQUtUSVZBU0lfQ0xJRU5UX0FQSSwgeyBjYWNoZTogXCJuby1zdG9yZVwiIH0pXG4gICAgY29uc3QgcmVmcmVzaGVkUGF5bG9hZCA9IChhd2FpdCByZWZyZXNoZWQuanNvbigpLmNhdGNoKCgpID0+ICh7IGRhdGE6IFtdIH0pKSkgYXMgdW5rbm93blxuICAgIGNvbnN0IHJlZnJlc2hlZEFycmF5ID0gQXJyYXkuaXNBcnJheShyZWZyZXNoZWRQYXlsb2FkKVxuICAgICAgPyByZWZyZXNoZWRQYXlsb2FkXG4gICAgICA6IEFycmF5LmlzQXJyYXkoKHJlZnJlc2hlZFBheWxvYWQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmRhdGEpXG4gICAgICAgID8gKHJlZnJlc2hlZFBheWxvYWQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmRhdGFcbiAgICAgICAgOiBbXVxuICAgIGNvbnN0IGl0ZW1zID0gcmVmcmVzaGVkQXJyYXlcbiAgICAgIC5tYXAoKGl0ZW0pID0+IG5vcm1hbGl6ZUl0ZW0oaXRlbSkpXG4gICAgICAuZmlsdGVyKChpdGVtKTogaXRlbSBpcyBBa3RpdmFzaUNsaWVudEl0ZW0gPT4gaXRlbSAhPT0gbnVsbClcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgLi4udG9BcGlSZXNwb25zZShpdGVtcyksXG4gICAgICAgIG1lc3NhZ2U6IHJlc3VsdD8ubWVzc2FnZSA/PyBcIkFrdGl2YXNpIHJlc2VsbGVyIGJlcmhhc2lsIGRpc2ltcGFuLlwiLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiAyMDEgfSxcbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlthcGkvYWt0aXZhc2ktY2xpZW50c10gZmFpbGVkIHRvIGNyZWF0ZVwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiR2FnYWwgbWVueWltcGFuIGRhdGEgYWt0aXZhc2kgcmVzZWxsZXIuXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDQwMCB9LFxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJOZXh0UmVzcG9uc2UiLCJBVVRIX0NPT0tJRV9OQU1FIiwidmVyaWZ5QXV0aFRva2VuIiwiUkVNT1RFX0FLVElWQVNJX0NMSUVOVF9BUEkiLCJSRVFVSVJFRF9GSUVMRFMiLCJub3JtYWxpemVJdGVtIiwiaXRlbSIsInJlY29yZCIsImlkUmF3IiwiaWQiLCJJRCIsIklkIiwiTnVtYmVyIiwiZ2V0Iiwia2V5IiwidHJpbSIsImlzRmluaXRlIiwibmFtYVBlbGFuZ2dhbiIsIm5hbWFMYXlhbmFuIiwia2FwYXNpdGFzTGF5YW5hbiIsInZsYW5JZCIsIm5hbWFNZXRybyIsInNpdGVNZXRybyIsImthcGFzaXRhc01ldHJvIiwiaXBBZGRyZXNzIiwiaXBHYXRld2F5Iiwicm91dGVyR2F0ZXdheSIsImNyZWF0ZWRCeSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInRvQXBpUmVzcG9uc2UiLCJpdGVtcyIsInN0YXR1cyIsInNhbml0aXplIiwiYm9keSIsInJlc3VsdCIsImZpZWxkIiwidmFsdWUiLCJFcnJvciIsIkdFVCIsInJlc3BvbnNlIiwiZmV0Y2giLCJjYWNoZSIsIm9rIiwicGF5bG9hZCIsImpzb24iLCJkYXRhQXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJkYXRhIiwibWFwIiwiZmlsdGVyIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIlBPU1QiLCJyZXF1ZXN0IiwidG9rZW4iLCJhdXRoIiwicmVxdWVzdFBheWxvYWQiLCJjcmVhdGVkX2J5IiwidXNlcm5hbWUiLCJtZXRob2QiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yUGF5bG9hZCIsImNhdGNoIiwibGVuZ3RoIiwicmVmcmVzaGVkIiwicmVmcmVzaGVkUGF5bG9hZCIsInJlZnJlc2hlZEFycmF5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/aktivasi-clients/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTH_COOKIE_NAME: () => (/* binding */ AUTH_COOKIE_NAME),\n/* harmony export */   clearAuthCookie: () => (/* binding */ clearAuthCookie),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   signAuthToken: () => (/* binding */ signAuthToken),\n/* harmony export */   verifyAuthToken: () => (/* binding */ verifyAuthToken)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst HEADER_B64 = Buffer.from(JSON.stringify({\n    alg: \"HS256\",\n    typ: \"JWT\"\n})).toString(\"base64url\");\nconst AUTH_COOKIE_NAME = \"auth-token\";\nfunction getSecret() {\n    return process.env.AUTH_SECRET || \"dev-secret-key\";\n}\nfunction signAuthToken(payload) {\n    const exp = Date.now() + (payload.ttlMs ?? 24 * 60 * 60 * 1000);\n    const body = Buffer.from(JSON.stringify({\n        userId: payload.userId,\n        username: payload.username,\n        exp\n    })).toString(\"base64url\");\n    const signature = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac(\"sha256\", getSecret()).update(`${HEADER_B64}.${body}`).digest(\"base64url\");\n    return `${HEADER_B64}.${body}.${signature}`;\n}\nfunction verifyAuthToken(token) {\n    if (!token) return null;\n    const parts = token.split(\".\");\n    if (parts.length !== 3) return null;\n    const [header, body, signature] = parts;\n    if (header !== HEADER_B64) return null;\n    const expected = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac(\"sha256\", getSecret()).update(`${header}.${body}`).digest(\"base64url\");\n    if (!timingSafeEqual(expected, signature)) {\n        return null;\n    }\n    try {\n        const payload = JSON.parse(Buffer.from(body, \"base64url\").toString(\"utf8\"));\n        if (typeof payload.exp !== \"number\" || payload.exp < Date.now()) {\n            return null;\n        }\n        return payload;\n    } catch  {\n        return null;\n    }\n}\nfunction timingSafeEqual(a, b) {\n    const aBuf = Buffer.from(a);\n    const bBuf = Buffer.from(b);\n    if (aBuf.length !== bBuf.length) return false;\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().timingSafeEqual(aBuf, bBuf);\n}\nfunction setAuthCookie(response, payload) {\n    const token = signAuthToken(payload);\n    response.cookies.set({\n        name: AUTH_COOKIE_NAME,\n        value: token,\n        httpOnly: true,\n        sameSite: \"lax\",\n        secure: \"development\" === \"production\",\n        path: \"/\",\n        maxAge: 60 * 60 * 24\n    });\n}\nfunction clearAuthCookie(response) {\n    response.cookies.set({\n        name: AUTH_COOKIE_NAME,\n        value: \"\",\n        maxAge: 0,\n        path: \"/\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQzJCO0FBUTNCLE1BQU1DLGFBQWFDLE9BQU9DLElBQUksQ0FBQ0MsS0FBS0MsU0FBUyxDQUFDO0lBQUVDLEtBQUs7SUFBU0MsS0FBSztBQUFNLElBQUlDLFFBQVEsQ0FBQztBQUUvRSxNQUFNQyxtQkFBbUIsYUFBWTtBQUU1QyxTQUFTQztJQUNQLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxJQUFJO0FBQ3BDO0FBRU8sU0FBU0MsY0FBY0MsT0FBNkQ7SUFDekYsTUFBTUMsTUFBTUMsS0FBS0MsR0FBRyxLQUFNSCxDQUFBQSxRQUFRSSxLQUFLLElBQUksS0FBSyxLQUFLLEtBQUssSUFBRztJQUM3RCxNQUFNQyxPQUFPbEIsT0FBT0MsSUFBSSxDQUN0QkMsS0FBS0MsU0FBUyxDQUFDO1FBQUVnQixRQUFRTixRQUFRTSxNQUFNO1FBQUVDLFVBQVVQLFFBQVFPLFFBQVE7UUFBRU47SUFBSSxJQUN6RVIsUUFBUSxDQUFDO0lBQ1gsTUFBTWUsWUFBWXZCLHdEQUFpQixDQUFDLFVBQVVVLGFBQWFlLE1BQU0sQ0FBQyxDQUFDLEVBQUV4QixXQUFXLENBQUMsRUFBRW1CLEtBQUssQ0FBQyxFQUFFTSxNQUFNLENBQUM7SUFDbEcsT0FBTyxDQUFDLEVBQUV6QixXQUFXLENBQUMsRUFBRW1CLEtBQUssQ0FBQyxFQUFFRyxVQUFVLENBQUM7QUFDN0M7QUFFTyxTQUFTSSxnQkFBZ0JDLEtBQXFCO0lBQ25ELElBQUksQ0FBQ0EsT0FBTyxPQUFPO0lBQ25CLE1BQU1DLFFBQVFELE1BQU1FLEtBQUssQ0FBQztJQUMxQixJQUFJRCxNQUFNRSxNQUFNLEtBQUssR0FBRyxPQUFPO0lBQy9CLE1BQU0sQ0FBQ0MsUUFBUVosTUFBTUcsVUFBVSxHQUFHTTtJQUNsQyxJQUFJRyxXQUFXL0IsWUFBWSxPQUFPO0lBQ2xDLE1BQU1nQyxXQUFXakMsd0RBQWlCLENBQUMsVUFBVVUsYUFBYWUsTUFBTSxDQUFDLENBQUMsRUFBRU8sT0FBTyxDQUFDLEVBQUVaLEtBQUssQ0FBQyxFQUFFTSxNQUFNLENBQUM7SUFDN0YsSUFBSSxDQUFDUSxnQkFBZ0JELFVBQVVWLFlBQVk7UUFDekMsT0FBTztJQUNUO0lBQ0EsSUFBSTtRQUNGLE1BQU1SLFVBQVVYLEtBQUsrQixLQUFLLENBQUNqQyxPQUFPQyxJQUFJLENBQUNpQixNQUFNLGFBQWFaLFFBQVEsQ0FBQztRQUNuRSxJQUFJLE9BQU9PLFFBQVFDLEdBQUcsS0FBSyxZQUFZRCxRQUFRQyxHQUFHLEdBQUdDLEtBQUtDLEdBQUcsSUFBSTtZQUMvRCxPQUFPO1FBQ1Q7UUFDQSxPQUFPSDtJQUNULEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRUEsU0FBU21CLGdCQUFnQkUsQ0FBUyxFQUFFQyxDQUFTO0lBQzNDLE1BQU1DLE9BQU9wQyxPQUFPQyxJQUFJLENBQUNpQztJQUN6QixNQUFNRyxPQUFPckMsT0FBT0MsSUFBSSxDQUFDa0M7SUFDekIsSUFBSUMsS0FBS1AsTUFBTSxLQUFLUSxLQUFLUixNQUFNLEVBQUUsT0FBTztJQUN4QyxPQUFPL0IsNkRBQXNCLENBQUNzQyxNQUFNQztBQUN0QztBQUVPLFNBQVNDLGNBQWNDLFFBQXNCLEVBQUUxQixPQUE2QztJQUNqRyxNQUFNYSxRQUFRZCxjQUFjQztJQUM1QjBCLFNBQVNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ25CQyxNQUFNbkM7UUFDTm9DLE9BQU9qQjtRQUNQa0IsVUFBVTtRQUNWQyxVQUFVO1FBQ1ZDLFFBQVFyQyxrQkFBeUI7UUFDakNzQyxNQUFNO1FBQ05DLFFBQVEsS0FBSyxLQUFLO0lBQ3BCO0FBQ0Y7QUFFTyxTQUFTQyxnQkFBZ0JWLFFBQXNCO0lBQ3BEQSxTQUFTQyxPQUFPLENBQUNDLEdBQUcsQ0FBQztRQUNuQkMsTUFBTW5DO1FBQ05vQyxPQUFPO1FBQ1BLLFFBQVE7UUFDUkQsTUFBTTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYW5lbC1ub2MvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIlxuXG50eXBlIFRva2VuUGF5bG9hZCA9IHtcbiAgdXNlcklkOiBudW1iZXJcbiAgdXNlcm5hbWU6IHN0cmluZ1xuICBleHA6IG51bWJlclxufVxuXG5jb25zdCBIRUFERVJfQjY0ID0gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoeyBhbGc6IFwiSFMyNTZcIiwgdHlwOiBcIkpXVFwiIH0pKS50b1N0cmluZyhcImJhc2U2NHVybFwiKVxuXG5leHBvcnQgY29uc3QgQVVUSF9DT09LSUVfTkFNRSA9IFwiYXV0aC10b2tlblwiXG5cbmZ1bmN0aW9uIGdldFNlY3JldCgpOiBzdHJpbmcge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuQVVUSF9TRUNSRVQgfHwgXCJkZXYtc2VjcmV0LWtleVwiXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduQXV0aFRva2VuKHBheWxvYWQ6IHsgdXNlcklkOiBudW1iZXI7IHVzZXJuYW1lOiBzdHJpbmc7IHR0bE1zPzogbnVtYmVyIH0pOiBzdHJpbmcge1xuICBjb25zdCBleHAgPSBEYXRlLm5vdygpICsgKHBheWxvYWQudHRsTXMgPz8gMjQgKiA2MCAqIDYwICogMTAwMClcbiAgY29uc3QgYm9keSA9IEJ1ZmZlci5mcm9tKFxuICAgIEpTT04uc3RyaW5naWZ5KHsgdXNlcklkOiBwYXlsb2FkLnVzZXJJZCwgdXNlcm5hbWU6IHBheWxvYWQudXNlcm5hbWUsIGV4cCB9KSxcbiAgKS50b1N0cmluZyhcImJhc2U2NHVybFwiKVxuICBjb25zdCBzaWduYXR1cmUgPSBjcnlwdG8uY3JlYXRlSG1hYyhcInNoYTI1NlwiLCBnZXRTZWNyZXQoKSkudXBkYXRlKGAke0hFQURFUl9CNjR9LiR7Ym9keX1gKS5kaWdlc3QoXCJiYXNlNjR1cmxcIilcbiAgcmV0dXJuIGAke0hFQURFUl9CNjR9LiR7Ym9keX0uJHtzaWduYXR1cmV9YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5QXV0aFRva2VuKHRva2VuPzogc3RyaW5nIHwgbnVsbCk6IFRva2VuUGF5bG9hZCB8IG51bGwge1xuICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KFwiLlwiKVxuICBpZiAocGFydHMubGVuZ3RoICE9PSAzKSByZXR1cm4gbnVsbFxuICBjb25zdCBbaGVhZGVyLCBib2R5LCBzaWduYXR1cmVdID0gcGFydHNcbiAgaWYgKGhlYWRlciAhPT0gSEVBREVSX0I2NCkgcmV0dXJuIG51bGxcbiAgY29uc3QgZXhwZWN0ZWQgPSBjcnlwdG8uY3JlYXRlSG1hYyhcInNoYTI1NlwiLCBnZXRTZWNyZXQoKSkudXBkYXRlKGAke2hlYWRlcn0uJHtib2R5fWApLmRpZ2VzdChcImJhc2U2NHVybFwiKVxuICBpZiAoIXRpbWluZ1NhZmVFcXVhbChleHBlY3RlZCwgc2lnbmF0dXJlKSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShCdWZmZXIuZnJvbShib2R5LCBcImJhc2U2NHVybFwiKS50b1N0cmluZyhcInV0ZjhcIikpIGFzIFRva2VuUGF5bG9hZFxuICAgIGlmICh0eXBlb2YgcGF5bG9hZC5leHAgIT09IFwibnVtYmVyXCIgfHwgcGF5bG9hZC5leHAgPCBEYXRlLm5vdygpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcGF5bG9hZFxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmZ1bmN0aW9uIHRpbWluZ1NhZmVFcXVhbChhOiBzdHJpbmcsIGI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBhQnVmID0gQnVmZmVyLmZyb20oYSlcbiAgY29uc3QgYkJ1ZiA9IEJ1ZmZlci5mcm9tKGIpXG4gIGlmIChhQnVmLmxlbmd0aCAhPT0gYkJ1Zi5sZW5ndGgpIHJldHVybiBmYWxzZVxuICByZXR1cm4gY3J5cHRvLnRpbWluZ1NhZmVFcXVhbChhQnVmLCBiQnVmKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXV0aENvb2tpZShyZXNwb25zZTogTmV4dFJlc3BvbnNlLCBwYXlsb2FkOiB7IHVzZXJJZDogbnVtYmVyOyB1c2VybmFtZTogc3RyaW5nIH0pIHtcbiAgY29uc3QgdG9rZW4gPSBzaWduQXV0aFRva2VuKHBheWxvYWQpXG4gIHJlc3BvbnNlLmNvb2tpZXMuc2V0KHtcbiAgICBuYW1lOiBBVVRIX0NPT0tJRV9OQU1FLFxuICAgIHZhbHVlOiB0b2tlbixcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzYW1lU2l0ZTogXCJsYXhcIixcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcbiAgICBwYXRoOiBcIi9cIixcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQXV0aENvb2tpZShyZXNwb25zZTogTmV4dFJlc3BvbnNlKSB7XG4gIHJlc3BvbnNlLmNvb2tpZXMuc2V0KHtcbiAgICBuYW1lOiBBVVRIX0NPT0tJRV9OQU1FLFxuICAgIHZhbHVlOiBcIlwiLFxuICAgIG1heEFnZTogMCxcbiAgICBwYXRoOiBcIi9cIixcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJIRUFERVJfQjY0IiwiQnVmZmVyIiwiZnJvbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGciLCJ0eXAiLCJ0b1N0cmluZyIsIkFVVEhfQ09PS0lFX05BTUUiLCJnZXRTZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiQVVUSF9TRUNSRVQiLCJzaWduQXV0aFRva2VuIiwicGF5bG9hZCIsImV4cCIsIkRhdGUiLCJub3ciLCJ0dGxNcyIsImJvZHkiLCJ1c2VySWQiLCJ1c2VybmFtZSIsInNpZ25hdHVyZSIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJkaWdlc3QiLCJ2ZXJpZnlBdXRoVG9rZW4iLCJ0b2tlbiIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJoZWFkZXIiLCJleHBlY3RlZCIsInRpbWluZ1NhZmVFcXVhbCIsInBhcnNlIiwiYSIsImIiLCJhQnVmIiwiYkJ1ZiIsInNldEF1dGhDb29raWUiLCJyZXNwb25zZSIsImNvb2tpZXMiLCJzZXQiLCJuYW1lIiwidmFsdWUiLCJodHRwT25seSIsInNhbWVTaXRlIiwic2VjdXJlIiwicGF0aCIsIm1heEFnZSIsImNsZWFyQXV0aENvb2tpZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faktivasi-clients%2Froute&page=%2Fapi%2Faktivasi-clients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faktivasi-clients%2Froute.ts&appDir=%2Froot%2Fisolir4%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fisolir4&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();